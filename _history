{"entries":[{"timestamp":1734886213183,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"http"],[-1,"s://developers.google.com/blockly/xml\"><variables><variable id=\"cmD!^lT5*|ReQqD2*5:9\">AIP1640_ADDR</variable><variable id=\"I`0YWV33^9uTMOtg]x,^\">i</variable><variable id=\"5X:sm7..K9FO!pP4yqAd\">dataBuffer</variable><variable id=\"]7UMwW8=5qq9#I/eWGtL\">displayData</variable><variable id=\"l;RHGIUn2EYoxl!wKm@P\">j</variable><variable id=\"MENCgYHN;V)]]zuz]kwG\">table</variable><variable id=\"crvC_dmzg#~vf;|-#5iI\">dataLine</variable><variable id=\"Wz6OqdHFjbEn1$uEItKu\">list</variable><variable id=\"_Z{3)xO+cP9D+ru*%p:9\">delayCount</variable></variables><comment x=\"297\" y=\"3140\" w=\"270\" h=\"120\">\nLigne de données à afficher\n</comment><block type=\"function_definition\" x=\"837\" y=\"-82\"><mutation name=\"sendBuffer\" functionid=\"B?_!9ohcmrFo_U[uP{!y\"><arg name=\"buffer\" id=\"tiboxylwygnrb9c12zpn\" type=\"Array\"></arg></mutation><field name=\"function_name\">sendBuffer</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction pour envoyer plusieurs octets</comment><value name=\"tiboxylwygnrb9c12zpn\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">buffer</field></block></value><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let dataBuffer = pins.createBuffer(buffer.length);\" numlines=\"1\" declaredvars=\"dataBuffer\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"I`0YWV33^9uTMOtg]x,^\">i</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">buffer</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"lists_index_set\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5X:sm7..K9FO!pP4yqAd\">dataBuffer</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"I`0YWV33^9uTMOtg]x,^\">i</field></block></value><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">buffer</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"I`0YWV33^9uTMOtg]x,^\">i</field></block></value></block></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pins.i2cWriteBuffer(AIP1640_ADDR, dataBuffer);\" numlines=\"1\"></mutation></block></next></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"cmD!^lT5*|ReQqD2*5:9\">AIP1640_ADDR</field><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse I2C pour le contrôleur LED (à ajuster si nécessaire)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">56</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MENCgYHN;V)]]zuz]kwG\">table</field><comment pinned=\"false\" h=\"80\" w=\"160\">Données pour l'affichage, équivalent à votre tableau `table`</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"4\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD1\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD2\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD3\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">248</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">216</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">126</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"1732\" y=\"-88\"><mutation name=\"sendByte\" functionid=\"caK7HVxCcu[@zqXTX+VF\"><arg name=\"data\" id=\"kiq9ojyid57olpw38gkv\" type=\"number\"></arg></mutation><field name=\"function_name\">sendByte</field><comment pinned=\"false\" h=\"80\" w=\"160\">Compteur pour changer de ligne\nFonction pour envoyer un octet via I2C</comment><value name=\"kiq9ojyid57olpw38gkv\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">data</field></block></value><statement name=\"STACK\"><block type=\"i2c_writenumber\"><field name=\"format\">NumberFormat.UInt8BE</field><value name=\"address\"><block type=\"variables_get\"><field name=\"VAR\" id=\"cmD!^lT5*|ReQqD2*5:9\">AIP1640_ADDR</field></block></value><value name=\"value\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">data</field></block></value></block></statement></block><block type=\"function_definition\" x=\"2081\" y=\"-82\"><mutation name=\"setBrightness\" functionid=\"9mSjAV*;xJg!Qf/sW%#$\"><arg name=\"level\" id=\"p8v6cwhdky73dpjp31zd\" type=\"number\"></arg></mutation><field name=\"function_name\">setBrightness</field><comment pinned=\"false\" h=\"80\" w=\"160\">Régler la luminosité</comment><value name=\"p8v6cwhdky73dpjp31zd\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">level</field></block></value><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"sendByte\" functionid=\"caK7HVxCcu[@zqXTX+VF\"><arg name=\"data\" id=\"kiq9ojyid57olpw38gkv\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité (0 à 7)</comment><value name=\"kiq9ojyid57olpw38gkv\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">136</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(level &amp; 0x07)</field></block></value></block></value></block></statement></block><block type=\"device_forever\" x=\"536\" y=\"97\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"initDisplay\" functionid=\"aQvQuPWGrZ,q_Xo7eoaR\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialisation de l'écran</comment><next><block type=\"function_call\"><mutation name=\"updateDisplay\" functionid=\"|aH|(*ij}qXs-~DZRlc:\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Mise à jour des données</comment><next><block type=\"function_call\"><mutation name=\"setBrightness\" functionid=\"9mSjAV*;xJg!Qf/sW%#$\"><arg name=\"level\" id=\"p8v6cwhdky73dpjp31zd\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité</comment><value name=\"p8v6cwhdky73dpjp31zd\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Attente</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2567\" y=\"-3\"><mutation name=\"updateDisplay\" functionid=\"|aH|(*ij}qXs-~DZRlc:\"></mutation><field name=\"function_name\">updateDisplay</field><comment pinned=\"false\" h=\"80\" w=\"160\">Mise à jour des données d'affichage</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"]7UMwW8=5qq9#I/eWGtL\">displayData</field><comment pinned=\"false\" h=\"80\" w=\"160\">Préparer un tableau de données à envoyer\nAdresse initiale 0xC0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"1\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value></block></value><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"l;RHGIUn2EYoxl!wKm@P\">j</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">15</field></block></value><statement name=\"DO\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]7UMwW8=5qq9#I/eWGtL\">displayData</field></block></value><value name=\"value\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"MENCgYHN;V)]]zuz]kwG\">table</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"crvC_dmzg#~vf;|-#5iI\">dataLine</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l;RHGIUn2EYoxl!wKm@P\">j</field></block></value></block></value></block></statement><next><block type=\"function_call\"><mutation name=\"sendBuffer\" functionid=\"B?_!9ohcmrFo_U[uP{!y\"><arg name=\"buffer\" id=\"tiboxylwygnrb9c12zpn\" type=\"Array\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Envoyer les données via I2C</comment><value name=\"tiboxylwygnrb9c12zpn\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]7UMwW8=5qq9#I/eWGtL\">displayData</field></block></value><next><block type=\"variables_change\"><field name=\"VAR\" id=\"_Z{3)xO+cP9D+ru*%p:9\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante après 10 cycles</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_Z{3)xO+cP9D+ru*%p:9\">delayCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"_Z{3)xO+cP9D+ru*%p:9\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"crvC_dmzg#~vf;|-#5iI\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante (boucle)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"crvC_dmzg#~vf;|-#5iI\">dataLine</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"-12\" y=\"3140\"><mutation name=\"initDisplay\" functionid=\"aQvQuPWGrZ,q_Xo7eoaR\"></mutation><field name=\"function_name\">initDisplay</field><comment pinned=\"false\" h=\"80\" w=\"160\">Initialisation de l'afficheur</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"sendByte\" functionid=\"caK7HVxCcu[@zqXTX+VF\"><arg name=\"data\" id=\"kiq9ojyid57olpw38gkv\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Configure l'adresse et active l'affichage\nConfigure l'incrément automatique de l'adresse</comment><value name=\"kiq9ojyid57olpw38gkv\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value></block></statement></block>"],[1,"://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n"],[0,"</xm"]],"start1":12,"start2":12,"length1":18262,"length2":113}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"// Régler la luminosité\nfunction setBrightness (level: number) {\n    // Réglage de la luminosité (0 à 7)\n    sendByte(136 + (level & 0x07))\n}\n// Initialisation de l'afficheur\nfunction initDisplay () {\n    // Configure l'adresse et active l'affichage\n    // Configure l'incrément automatique de l'adresse\n    sendByte(64)\n}\n// Mise à jour des données d'affichage\nfunction updateDisplay () {\n    // Préparer un tableau de données à envoyer\n    // Adresse initiale 0xC0\n    displayData = [192]\n    for (let j = 0; j <= 15; j++) {\n        displayData.push(table[dataLine][j])\n    }\n    // Envoyer les données via I2C\n    sendBuffer(displayData)\n    // Passer à la ligne suivante après 10 cycles\n    delayCount += 1\n    if (delayCount >= 10) {\n        delayCount = 0\n        // Passer à la ligne suivante (boucle)\n        dataLine = (dataLine + 1) % 4\n    }\n}\n// Compteur pour changer de ligne\n// Fonction pour envoyer un octet via I2C\nfunction sendByte (data: number) {\n    pins.i2cWriteNumber(\n    AIP1640_ADDR,\n    data,\n    NumberFormat.UInt8BE,\n    false\n    )\n}\n// Fonction pour envoyer plusieurs octets\nfunction sendBuffer (buffer: any[]) {\n    let dataBuffer = pins.createBuffer(buffer.length);\nfor (let i = 0; i <= buffer.length - 1; i++) {\n        dataBuffer[i] = buffer[i]\n    }\n    pins.i2cWriteBuffer(AIP1640_ADDR, dataBuffer);\n}\n/**\n * Ligne de données à afficher\n */\nlet delayCount = 0\nlet dataLine = 0\nlet displayData: number[] = []\nlet table: number[][] = []\nlet AIP1640_ADDR = 0\n// Adresse I2C pour le contrôleur LED (à ajuster si nécessaire)\nAIP1640_ADDR = 56\n// Données pour l'affichage, équivalent à votre tableau `table`\ntable = [\n[\n0,\n0,\n0,\n0,\n38,\n65,\n134,\n128,\n128,\n128,\n134,\n65,\n38,\n0,\n0,\n0\n],\n[\n0,\n0,\n0,\n0,\n0,\n28,\n34,\n66,\n132,\n66,\n34,\n28,\n0,\n0,\n0,\n0\n],\n[\n0,\n0,\n0,\n0,\n32,\n68,\n66,\n132,\n128,\n132,\n66,\n68,\n32,\n0,\n0,\n0\n],\n[\n0,\n0,\n0,\n0,\n192,\n64,\n248,\n216,\n126,\n255,\n192,\n0,\n0,\n0,\n0,\n0\n]\n]\n// Programme principal\nbasic.forever(function () {\n    // Initialisation de l'écran\n    initDisplay()\n    // Mise à jour des données\n    updateDisplay()\n    // Réglage de la luminosité\n    setBrightness(2)\n    // Attente\n    basic.pause(100)\n})"],[0,"\n"]],"start1":0,"start2":0,"length1":2149,"length2":1}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"   \""],[-1,"preferredEditor\": \"tsprj\""],[1,"additionalFilePaths\": []"],[0,"\n}\n"]],"start1":236,"start2":236,"length1":32,"length2":31}]}]},{"timestamp":1734886578381,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"id=\""],[-1,"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</variable><variable id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</variable><variable id=\"ruvFMZxQ[c_/p%6zgEDn\">j</variable><variable id=\":y~bDA~XRumHh2F$GQ4p\">table</variable><variable id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</variable><variable id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</variable></variables><comment x=\"20\" y=\"3249\" w=\"260\" h=\"120\">\nLigne actuelle des données\n</comment><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field><comment pinned=\"false\" h=\"80\" w=\"160\">Définit les broches pour SDA et SCL</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P20</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\":y~bDA~XRumHh2F$GQ4p\">table</field><comment pinned=\"false\" h=\"80\" w=\"160\">Tableau de données à afficher</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"4\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD1\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD2\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD3\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"15\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">248</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">216</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">126</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><next><block type=\"function_call\"><mutation name=\"initPins\" functionid=\"LfI{V~B;ZZR.6Sy#6|a@\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"500\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">************ Activer l'incrémentation automatique ************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Envoi de l'adresse I²C (0x38) avec bit d'écriture (R/W=0)</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Activer l'incrémentation automatique</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">********** Envoyer les données d'affichage ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse I²C avec bit d'écriture</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse mémoire de départ (0x00)</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><next><block type=\"pxt_controls_for\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"ruvFMZxQ[c_/p%6zgEDn\">j</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">15</field></block></value><statement name=\"DO\"><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Envoi des données ligne par ligne</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\":y~bDA~XRumHh2F$GQ4p\">table</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ruvFMZxQ[c_/p%6zgEDn\">j</field></block></value></block></value></block></statement><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Régler la luminosité ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse I²C avec bit d'écriture</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">138</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data><next><block type=\"variables_change\"><field name=\"VAR\" id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Mise à jour de la ligne ***************</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Petite pause</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1429\" y=\"20\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><field name=\"function_name\">IIC_send</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Envoyer un octet via I²C</comment><value name=\"2b4lmc19alf1uu06jx2i\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field></block></value><statement name=\"STACK\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">sendData &amp; 0x01</field></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"sendData &gt;&gt;= 1;\" numlines=\"1\"></mutation><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type=\"device_set_digital_pin\"><comment pinned=\"false\" h=\"80\" w=\"160\">Attendre l'acknowledge</comment><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2006\" y=\"20\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><field name=\"function_name\">IIC_start</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Démarrer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2507\" y=\"20\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><field name=\"function_name\">IIC_end</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Terminer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3008\" y=\"20\"><mutation name=\"initPins\" functionid=\"LfI{V~B;ZZR.6Sy#6|a@\"></mutation><field name=\"function_name\">initPins</field><comment pinned=\"false\" h=\"80\" w=\"160\">Compteur pour changer la ligne\nFonction : Initialiser l'état des broches</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></next"],[1,"cmD!^lT5*|ReQqD2*5:9\">AIP1640_ADDR</variable><variable id=\"I`0YWV33^9uTMOtg]x,^\">i</variable><variable id=\"5X:sm7..K9FO!pP4yqAd\">dataBuffer</variable><variable id=\"]7UMwW8=5qq9#I/eWGtL\">displayData</variable><variable id=\"l;RHGIUn2EYoxl!wKm@P\">j</variable><variable id=\"MENCgYHN;V)]]zuz]kwG\">table</variable><variable id=\"crvC_dmzg#~vf;|-#5iI\">dataLine</variable><variable id=\"Wz6OqdHFjbEn1$uEItKu\">list</variable><variable id=\"_Z{3)xO+cP9D+ru*%p:9\">delayCount</variable></variables><comment x=\"297\" y=\"3140\" w=\"270\" h=\"120\">\nLigne de données à afficher\n</comment><block type=\"function_definition\" x=\"837\" y=\"-82\"><mutation name=\"sendBuffer\" functionid=\"B?_!9ohcmrFo_U[uP{!y\"><arg name=\"buffer\" id=\"tiboxylwygnrb9c12zpn\" type=\"Array\"></arg></mutation><field name=\"function_name\">sendBuffer</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction pour envoyer plusieurs octets</comment><value name=\"tiboxylwygnrb9c12zpn\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">buffer</field></block></value><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let dataBuffer = pins.createBuffer(buffer.length);\" numlines=\"1\" declaredvars=\"dataBuffer\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"I`0YWV33^9uTMOtg]x,^\">i</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">buffer</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"lists_index_set\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5X:sm7..K9FO!pP4yqAd\">dataBuffer</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"I`0YWV33^9uTMOtg]x,^\">i</field></block></value><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">buffer</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"I`0YWV33^9uTMOtg]x,^\">i</field></block></value></block></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pins.i2cWriteBuffer(AIP1640_ADDR, dataBuffer);\" numlines=\"1\"></mutation></block></next></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"cmD!^lT5*|ReQqD2*5:9\">AIP1640_ADDR</field><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse I2C pour le contrôleur LED (à ajuster si nécessaire)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">56</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"MENCgYHN;V)]]zuz]kwG\">table</field><comment pinned=\"false\" h=\"80\" w=\"160\">Données pour l'affichage, équivalent à votre tableau `table`</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"4\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD1\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD2\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD3\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">248</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">216</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">126</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"1732\" y=\"-88\"><mutation name=\"sendByte\" functionid=\"caK7HVxCcu[@zqXTX+VF\"><arg name=\"data\" id=\"kiq9ojyid57olpw38gkv\" type=\"number\"></arg></mutation><field name=\"function_name\">sendByte</field><comment pinned=\"false\" h=\"80\" w=\"160\">Compteur pour changer de ligne\nFonction pour envoyer un octet via I2C</comment><value name=\"kiq9ojyid57olpw38gkv\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">data</field></block></value><statement name=\"STACK\"><block type=\"i2c_writenumber\"><field name=\"format\">NumberFormat.UInt8BE</field><value name=\"address\"><block type=\"variables_get\"><field name=\"VAR\" id=\"cmD!^lT5*|ReQqD2*5:9\">AIP1640_ADDR</field></block></value><value name=\"value\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">data</field></block></value></block></statement></block><block type=\"function_definition\" x=\"2081\" y=\"-82\"><mutation name=\"setBrightness\" functionid=\"9mSjAV*;xJg!Qf/sW%#$\"><arg name=\"level\" id=\"p8v6cwhdky73dpjp31zd\" type=\"number\"></arg></mutation><field name=\"function_name\">setBrightness</field><comment pinned=\"false\" h=\"80\" w=\"160\">Régler la luminosité</comment><value name=\"p8v6cwhdky73dpjp31zd\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">level</field></block></value><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"sendByte\" functionid=\"caK7HVxCcu[@zqXTX+VF\"><arg name=\"data\" id=\"kiq9ojyid57olpw38gkv\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité (0 à 7)</comment><value name=\"kiq9ojyid57olpw38gkv\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">136</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(level &amp; 0x07)</field></block></value></block></value></block></statement></block><block type=\"device_forever\" x=\"536\" y=\"97\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"initDisplay\" functionid=\"aQvQuPWGrZ,q_Xo7eoaR\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialisation de l'écran</comment><next><block type=\"function_call\"><mutation name=\"updateDisplay\" functionid=\"|aH|(*ij}qXs-~DZRlc:\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Mise à jour des données</comment><next><block type=\"function_call\"><mutation name=\"setBrightness\" functionid=\"9mSjAV*;xJg!Qf/sW%#$\"><arg name=\"level\" id=\"p8v6cwhdky73dpjp31zd\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité</comment><value name=\"p8v6cwhdky73dpjp31zd\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Attente</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2567\" y=\"-3\"><mutation name=\"updateDisplay\" functionid=\"|aH|(*ij}qXs-~DZRlc:\"></mutation><field name=\"function_name\">updateDisplay</field><comment pinned=\"false\" h=\"80\" w=\"160\">Mise à jour des données d'affichage</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"]7UMwW8=5qq9#I/eWGtL\">displayData</field><comment pinned=\"false\" h=\"80\" w=\"160\">Préparer un tableau de données à envoyer\nAdresse initiale 0xC0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"1\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value></block></value><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"l;RHGIUn2EYoxl!wKm@P\">j</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">15</field></block></value><statement name=\"DO\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]7UMwW8=5qq9#I/eWGtL\">displayData</field></block></value><value name=\"value\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"MENCgYHN;V)]]zuz]kwG\">table</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"crvC_dmzg#~vf;|-#5iI\">dataLine</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l;RHGIUn2EYoxl!wKm@P\">j</field></block></value></block></value></block></statement><next><block type=\"function_call\"><mutation name=\"sendBuffer\" functionid=\"B?_!9ohcmrFo_U[uP{!y\"><arg name=\"buffer\" id=\"tiboxylwygnrb9c12zpn\" type=\"Array\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Envoyer les données via I2C</comment><value name=\"tiboxylwygnrb9c12zpn\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]7UMwW8=5qq9#I/eWGtL\">displayData</field></block></value><next><block type=\"variables_change\"><field name=\"VAR\" id=\"_Z{3)xO+cP9D+ru*%p:9\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante après 10 cycles</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_Z{3)xO+cP9D+ru*%p:9\">delayCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"_Z{3)xO+cP9D+ru*%p:9\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"crvC_dmzg#~vf;|-#5iI\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante (boucle)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"crvC_dmzg#~vf;|-#5iI\">dataLine</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"-12\" y=\"3140\"><mutation name=\"initDisplay\" functionid=\"aQvQuPWGrZ,q_Xo7eoaR\"></mutation><field name=\"function_name\">initDisplay</field><comment pinned=\"false\" h=\"80\" w=\"160\">Initialisation de l'afficheur</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"sendByte\" functionid=\"caK7HVxCcu[@zqXTX+VF\"><arg name=\"data\" id=\"kiq9ojyid57olpw38gkv\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Configure l'adresse et active l'affichage\nConfigure l'incrément automatique de l'adresse</comment><value name=\"kiq9ojyid57olpw38gkv\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value"],[0,"></b"]],"start1":76,"start2":76,"length1":27276,"length2":18169}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"// "],[-1,"Définit les broches pour SDA et SCL\nconst IIC_SCL = DigitalPin.P0; // Remplacez par la broche SCL utilisée\nconst IIC_SDA = DigitalPin.P1; // Remplacez par la broche SDA utilisée\n\n// Tableau de données à afficher\nconst table: number[][] = [\n    [0x00, 0x00, 0x00, 0x00, 0x26, 0x41, 0x86, 0x80, 0x80, 0x80, 0x86, 0x41, 0x26, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x22, 0x42, 0x84, 0x42, 0x22, 0x1C, 0x00, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0x20, 0x44, 0x42, 0x84, 0x80, 0x84, 0x42, 0x44, 0x20, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0xC0, 0x40, 0xF8, 0xD8, 0x7E, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00]\n];\n\nlet dataLine = 0; // Ligne actuelle des données\nlet delayCount = 0; // Compteur pour changer la ligne\n\n// Fonction : Initialiser l'état des broches"],[1,"Régler la luminosité\nfunction setBrightness (level: number) {\n    // Réglage de la luminosité (0 à 7)\n    sendByte(136 + (level & 0x07))\n}\n// Initialisation de l'afficheur"],[0,"\nfun"]],"start1":0,"start2":0,"length1":799,"length2":178},{"diffs":[[0,"init"],[-1,"Pins(): void {\n    pins.digitalWritePin(IIC_SCL, 1);\n    pins.digitalWritePin(IIC_SDA, 1);\n}\n\n// Fonction : Démar"],[1,"Display () {\n    // Configure l'adresse et active l'affichage\n    // Configu"],[0,"re"],[-1,"r"],[0," l"],[-1,"a communication I²C\nfunction IIC_start(): void {\n    pins.digitalWritePin(IIC_SDA, 1);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 0);\n    control.waitMicros(3);\n}\n\n// Fonction : Envoyer un octet via I²C\nfunction IIC_send(sendData: number): void {"],[1,"'incrément automatique de l'adresse\n    sendByte(64)\n}\n// Mise à jour des données d'affichage\nfunction updateDisplay () {\n    // Préparer un tableau de données à envoyer\n    // Adresse initiale 0xC0\n    displayData = [192]"],[0,"\n   "]],"start1":184,"start2":184,"length1":493,"length2":310},{"diffs":[[0,"let "],[-1,"i"],[1,"j"],[0," = 0; "],[-1,"i < 8; i"],[1,"j <= 15; j"],[0,"++) "]],"start1":500,"start2":500,"length1":23,"length2":25},{"diffs":[[0,"    "],[-1,"pins.digitalWritePin(IIC_SCL, 0);"],[1,"displayData.push(table[dataLine][j])"],[0,"\n    "],[1,"}\n"],[0,"    "],[-1,"control.waitMicros(3);\n        if (sendData & 0x01) {\n            pins.digitalWritePin(IIC_SDA, 1);\n        } else {\n            pins.digitalWritePin(IIC_SDA, 0);\n        }\n        sendData >>= 1;\n        control.waitMicros(3);\n        pins.digitalWritePin(IIC_SCL, 1);\n        control.waitMicros(3);"],[1,"// Envoyer les données via I2C\n    sendBuffer(displayData)\n    // Passer à la ligne suivante après 10 cycles\n    delayCount += 1\n    if (delayCount >= 10) {\n        delayCount = 0"],[0,"\n    "],[-1,"}\n"],[0,"    // "],[-1,"Attendre l'acknowledge\n    pins.digitalWritePin(IIC_SCL, 0);\n    pins.digitalWritePin(IIC_SDA, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 0);\n}\n\n// Fonction : Terminer la communication I²"],[1,"Passer à la ligne suivante (boucle)\n        dataLine = (dataLine + 1) % 4\n    }\n}\n// Compteur pour changer de ligne\n// Fonction pour envoyer un octet via I2"],[0,"C\nfu"]],"start1":531,"start2":531,"length1":638,"length2":402},{"diffs":[[0,"ion "],[-1,"IIC_end(): void {\n    pins.digitalWritePin(IIC_SCL, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 1);\n    control.waitMicros(3);"],[1,"sendByte (data: number) {\n    pins.i2cWriteNumber(\n    AIP1640_ADDR,\n    data,\n    NumberFormat.UInt8BE,\n    false\n    )"],[0,"\n}\n"],[-1,"\n"],[0,"// "],[-1,"Programme principal\nbasic.forever(() => {\n    /************** Activer l'incrémentation automatique **************/\n    IIC_start();\n    //IIC_send(0x38 << 1 | 0x00); // Envoi de l'adresse I²C (0x38) avec bit d'écriture (R/W=0)\n    IIC_send(0x40);      "],[1,"Fonction pour envoyer plusieurs octets\nfunction sendBuffer (buffer: any[]) {\n    let dataBuffer = pins.createBuffer(buffer.length);\nfor (let i = 0; i <= buffer.length - 1; i++) {\n        dataBuffer[i] = buffer[i]\n"],[0,"    "],[1,"}\n"],[0,"   "],[-1,"// Activer l'incrémentation automatique\n    IIC_end();\n\n    /************ Envoyer les"],[1," pins.i2cWriteBuffer(AIP1640_ADDR, dataBuffer);\n}\n/**\n * Ligne de"],[0," don"]],"start1":936,"start2":936,"length1":636,"length2":421},{"diffs":[[0,"ées "],[-1,"d'"],[1,"à "],[0,"affich"],[-1,"age *****************/\n    IIC_start();\n    //IIC_send(0x38 << 1 | 0x00); // Adresse I²C avec bit d'écriture\n    IIC_send(0xC0);             // Adresse mémoire de départ (0x00)\n    for (let i = 0; i < 16; i++) {\n        IIC_send(table[dataLine][i]); // Envoi des données ligne par ligne\n    }\n    IIC_end();\n\n    /************* Régler la luminosité *****************/\n    IIC_start();\n    //IIC_send(0x38 << 1 | 0x00); // Adresse I²C avec bit d'écriture\n    IIC_send(0x8A);             // Réglage de la luminosité\n    IIC_end();\n\n    /************* Mise à jour de la ligne *****************/\n    delayCount++;\n    if (delayCount >= 10) {\n       "],[1,"er\n */\nlet delayCount = 0\nlet dataLine = 0\nlet displayData: number[] = []\nlet table: number[][] = []\nlet AIP1640_ADDR = 0\n// Adresse I2C pour le contrôleur LED (à ajuster si nécessaire)\nAIP1640_ADDR = 56\n// Données pour l'affichage, équivalent à votre tableau `table`\ntable = [\n[\n0,\n0,\n0,\n0,\n38,\n65,\n134,\n128,\n128,\n128,\n134,\n65,\n38,\n0,\n0,\n0\n],\n[\n0,\n0,\n0,\n0,\n0,\n28,\n34,\n66,\n132,\n66,\n34,\n28,\n0,\n0,\n0,\n0\n],\n[\n0,\n0,\n0,\n0,\n32,\n68,\n66,\n132,\n128,\n132,\n66,\n68,\n32,\n0,\n0,\n0\n],\n[\n0,\n0,\n0,\n0,\n192,\n64,\n248,\n216,\n126,\n255,\n192,\n0,\n0,\n0,\n0,\n0\n]\n]\n// Programme principal\nbasic.forever(function () {\n    // Initialisation de l'écran\n    initDisplay()\n    // Mise à jour des données\n    updateDisplay()\n    // Réglage"],[0," de"],[1," "],[0,"la"],[-1,"yCount = 0;\n        dataLine = (dataLine + 1) % 4; // Passer à la ligne suiva"],[1," luminosité\n    setBrightness(2)\n    // Atte"],[0,"nte\n"],[-1,"    }\n\n"],[0,"    "]],"start1":1358,"start2":1358,"length1":754,"length2":771},{"diffs":[[0,"100)"],[-1,"; // Petite pause\n});\n\n// Initialiser les broches au démarrage\ninitPins();"],[1,"\n})\n"]],"start1":2141,"start2":2141,"length1":78,"length2":8}]}]},{"timestamp":1734887053214,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"in.P"],[-1,"19"],[1,"0"],[0,"; //"]],"start1":63,"start2":63,"length1":10,"length2":9},{"diffs":[[0,"talPin.P"],[-1,"20"],[1,"1"],[0,"; // Rem"]],"start1":130,"start2":130,"length1":18,"length2":17},{"diffs":[[0,"IC_start();\n    "],[1,"//"],[0,"IIC_send(0x38 <<"]],"start1":2382,"start2":2382,"length1":32,"length2":34},{"diffs":[[0,"IC_start();\n    "],[1,"//"],[0,"IIC_send(0x38 <<"]],"start1":2651,"start2":2651,"length1":32,"length2":34},{"diffs":[[0,"tart();\n    "],[1,"//"],[0,"IIC_send(0x3"]],"start1":3000,"start2":3000,"length1":24,"length2":26}]}]},{"timestamp":1734887574053,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"IC_start();\n    "],[-1,"//"],[0,"IIC_send(0x38 <<"]],"start1":2384,"start2":2384,"length1":34,"length2":32},{"diffs":[[0,"(R/W=0)\n"],[1,""],[0,"    IIC_"]],"start1":2481,"start2":2481,"length1":16,"length2":16},{"diffs":[[0,"IC_start();\n    "],[-1,"//"],[0,"IIC_send(0x38 <<"]],"start1":2651,"start2":2651,"length1":34,"length2":32},{"diffs":[[0,"end("],[-1,"i); //"],[0,"tabl"]],"start1":2846,"start2":2846,"length1":14,"length2":8},{"diffs":[[0,"Line][i]"],[1,"); "],[0,"// Envoi"]],"start1":2860,"start2":2860,"length1":16,"length2":19},{"diffs":[[0,"tart();\n"],[1,""],[0,"    "],[-1,"//"],[0,"IIC_send"]],"start1":2998,"start2":2998,"length1":22,"length2":20}]}]},{"timestamp":1734887723544,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0," 0x00],\n"],[1,"    [0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x22, 0x42, 0x84, 0x42, 0x22, 0x1C, 0x00, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0x20, 0x44, 0x42, 0x84, 0x80, 0x84, 0x42, 0x44, 0x20, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0xC0, 0x40, 0xF8, 0xD8, 0x7E, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00]"],[0,"\n];\n\nlet"]],"start1":339,"start2":339,"length1":16,"length2":314}]}]},{"timestamp":1734889126914,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0," 0x00],\n"],[1,"\n"],[0,"];\n\nlet "]],"start1":339,"start2":339,"length1":16,"length2":17}]}]},{"timestamp":1734889127670,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"0],\n"],[-1,"    [0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x22, 0x42, 0x84, 0x42, 0x22, 0x1C, 0x00, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0x20, 0x44, 0x42, 0x84, 0x80, 0x84, 0x42, 0x44, 0x20, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0xC0, 0x40, 0xF8, 0xD8, 0x7E, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00]\n"],[0,"];\n\n"]],"start1":343,"start2":343,"length1":307,"length2":8}]}]},{"timestamp":1734889129446,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"00)\n    "],[-1,"//"],[0,"for (let"]],"start1":2798,"start2":2798,"length1":18,"length2":16}]}]},{"timestamp":1734890729424,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,") {\n    "],[-1,"//"],[0,"    IIC_"]],"start1":2835,"start2":2835,"length1":18,"length2":16}]}]},{"timestamp":1734890730554,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"   IIC_start();\n"],[1,"    //IIC_send(0x38 << 1 | 0x00); // Envoi de l'adresse I²C (0x38) avec bit d'écriture (R/W=0)\n"],[0,"    IIC_send(0x4"]],"start1":2380,"start2":2380,"length1":32,"length2":127},{"diffs":[[0,"   IIC_start();\n"],[1,"    //IIC_send(0x38 << 1 | 0x00); // Adresse I²C avec bit d'écriture\n"],[0,"    IIC_send(0xC"]],"start1":2649,"start2":2649,"length1":32,"length2":101},{"diffs":[[0,"gne\n"],[-1,"    //}\n    IIC_send(1);\n    for (let i = 0; i < 15; i++) {\n       IIC_send(0); //table[dataLine][i]// Envoi des données ligne par ligne\n"],[0,"    "]],"start1":2915,"start2":2915,"length1":145,"length2":8},{"diffs":[[0,"IC_start();\n"],[1,"    //IIC_send(0x38 << 1 | 0x00); // Adresse I²C avec bit d'écriture\n"],[0,"    IIC_send"]],"start1":3005,"start2":3005,"length1":24,"length2":93}]}]},{"timestamp":1734891257234,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"id=\""],[-1,"x]CU)5VfLV!0v[[X%G^A"],[1,"VRa~?v^(3;sw+3$^N%yi"],[0,"\">IIC_S"],[-1,"DA"],[1,"CL"],[0,"</va"]],"start1":76,"start2":76,"length1":37,"length2":37},{"diffs":[[0,"id=\""],[-1,"^|CPoH%2h4Bm9{Bm4:h^"],[1,"K-p?FQ-6R.C;q[UXkZlp"],[0,"\">IIC_S"],[-1,"CL"],[1,"DA"],[0,"</va"]],"start1":130,"start2":130,"length1":37,"length2":37},{"diffs":[[0,"ble id=\""],[-1,"A/%}~4^sYC^,:zE76;]%"],[1,"ruvFMZxQ[c_/p%6zgEDn"],[0,"\">j</var"]],"start1":180,"start2":180,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"Dxc;:[0WB.Z#GS$gcp4T\">delayCount"],[1,":y~bDA~XRumHh2F$GQ4p\">table"],[0,"</va"]],"start1":232,"start2":232,"length1":40,"length2":35},{"diffs":[[0,"ble id=\""],[-1,"-T6?nIzcFl{{8-O8_Mq@"],[1,"aQ+RYMKFi!Xo;=-+.`M^"],[0,"\">dataLi"]],"start1":280,"start2":280,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"BVz4}YRU/LiyY!O++OM7\">table"],[1,"wD2@IfWf!f7D(S^*UZNn\">delayCount"],[0,"</va"]],"start1":339,"start2":339,"length1":35,"length2":40},{"diffs":[[0," x=\""],[-1,"5"],[0,"20"],[-1,".890625"],[0,"\" y=\"3"],[-1,"417"],[1,"249"],[0,"\" w="]],"start1":406,"start2":406,"length1":27,"length2":19},{"diffs":[[0,"AR\" id=\""],[-1,"^|CPoH%2h4Bm9{Bm4:h^"],[1,"VRa~?v^(3;sw+3$^N%yi"],[0,"\">IIC_SC"]],"start1":586,"start2":586,"length1":36,"length2":36},{"diffs":[[0," SCL"],[-1,"\nRemplacez par la broche SCL utilisée"],[0,"</co"]],"start1":701,"start2":701,"length1":45,"length2":8},{"diffs":[[0,"id=\""],[-1,"x]CU)5VfLV!0v[[X%G^A\">IIC_SDA</field><comment pinned=\"false\" h=\"80\" w=\"160\">Remplacez par la broche SDA utilisée</comment"],[1,"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field"],[0,"><va"]],"start1":932,"start2":932,"length1":129,"length2":44},{"diffs":[[0,"id=\""],[-1,"BVz4}YRU/LiyY!O++OM7"],[1,":y~bDA~XRumHh2F$GQ4p"],[0,"\">ta"]],"start1":1190,"start2":1190,"length1":28,"length2":28},{"diffs":[[0,"ock "],[-1,"type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"function draw(image: Buffer)\" line1=\"{\" line2=\"    \" line3=\"}\" numlines=\"4\"></mutation><next><block "],[0,"type"]],"start1":7789,"start2":7789,"length1":190,"length2":8},{"diffs":[[0,"tionid=\""],[-1,"fVQk:U]=u^NKsDh3/_0v"],[1,"LfI{V~B;ZZR.6Sy#6|a@"],[0,"\"></muta"]],"start1":7844,"start2":7844,"length1":36,"length2":36},{"diffs":[[0,"t></block></"],[-1,"next></block></"],[0,"statement></"]],"start1":8013,"start2":8013,"length1":39,"length2":24},{"diffs":[[0,"tionid=\""],[-1,"sr)B7ho(D(2g~b;@ZJf5"],[1,"Br9x~.vgqL*[PI|n`X5J"],[0,"\"></muta"]],"start1":8240,"start2":8240,"length1":36,"length2":36},{"diffs":[[0,"tionid=\""],[-1,"b.Ir.?Fvp7*F6U7W]6Qh"],[1,"y4qquJAUgmATVFUcS3_M"],[0,"\"><arg n"]],"start1":8456,"start2":8456,"length1":36,"length2":36},{"diffs":[[0,"ta\" id=\""],[-1,"wzh9vs47k2trw2seyhxf"],[1,"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Envoi de l'adresse I²C (0x38) avec bit d'écriture (R/W=0)</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i"],[0,"\" type=\""]],"start1":8503,"start2":8503,"length1":36,"length2":519},{"diffs":[[0,"e name=\""],[-1,"wzh9vs47k2trw2seyhxf"],[1,"2b4lmc19alf1uu06jx2i"],[0,"\"><shado"]],"start1":9137,"start2":9137,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,";rGQvE;1Y^?qP`IdR$%9\"></mutation"],[1,"T][}to^pVg#ms8~xW_bZ\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data"],[0,"><ne"]],"start1":9306,"start2":9306,"length1":40,"length2":86},{"diffs":[[0,"tionid=\""],[-1,"sr)B7ho(D(2g~b;@ZJf5"],[1,"Br9x~.vgqL*[PI|n`X5J"],[0,"\"></muta"]],"start1":9454,"start2":9454,"length1":36,"length2":36},{"diffs":[[0,"tionid=\""],[-1,"b.Ir.?Fvp7*F6U7W]6Qh"],[1,"y4qquJAUgmATVFUcS3_M"],[0,"\"><arg n"]],"start1":9666,"start2":9666,"length1":36,"length2":36},{"diffs":[[0,"ta\" id=\""],[-1,"wzh9vs47k2trw2seyhxf"],[1,"2b4lmc19alf1uu06jx2i"],[0,"\" type=\""]],"start1":9713,"start2":9713,"length1":36,"length2":36},{"diffs":[[0,"sse "],[-1,"mémoire de départ (0x00)"],[1,"I²C avec bit d'écriture"],[0,"</co"]],"start1":9817,"start2":9817,"length1":32,"length2":31},{"diffs":[[0,"e name=\""],[-1,"wzh9vs47k2trw2seyhxf"],[1,"2b4lmc19alf1uu06jx2i"],[0,"\"><shado"]],"start1":9859,"start2":9859,"length1":36,"length2":36},{"diffs":[[0,"eld name=\"NUM\">1"],[-1,"92"],[0,"</field></shadow"]],"start1":9919,"start2":9919,"length1":34,"length2":32},{"diffs":[[0,"ow><"],[-1,"/value><next><block type=\"pxt_controls_for\"><comment pinned=\"false\" h=\"80\" w=\"160\">for (let i = 0; i &lt; 16; i++) {\nIIC_send(i); //table[dataLine][i]// Envoi des données ligne par ligne\n}</comment"],[1,"block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse mémoire de départ (0x00)</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><next><block type=\"pxt_controls_for\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data"],[0,"><va"]],"start1":9949,"start2":9949,"length1":205,"length2":557},{"diffs":[[0,"AR\" id=\""],[-1,"A/%}~4^sYC^,:zE76;]%"],[1,"ruvFMZxQ[c_/p%6zgEDn"],[0,"\">j</fie"]],"start1":10616,"start2":10616,"length1":36,"length2":36},{"diffs":[[0,"e=\"NUM\">"],[-1,"15"],[1,"0"],[0,"</field>"]],"start1":10731,"start2":10731,"length1":18,"length2":17},{"diffs":[[0,"field></shadow><"],[1,"block type=\"math_number\"><field name=\"NUM\">15</field></block><"],[0,"/value><statemen"]],"start1":10742,"start2":10742,"length1":32,"length2":94},{"diffs":[[0,"tionid=\""],[-1,"b.Ir.?Fvp7*F6U7W]6Qh"],[1,"y4qquJAUgmATVFUcS3_M"],[0,"\"><arg n"]],"start1":10906,"start2":10906,"length1":36,"length2":36},{"diffs":[[0,"ta\" id=\""],[-1,"wzh9vs47k2trw2seyhxf"],[1,"2b4lmc19alf1uu06jx2i"],[0,"\" type=\""]],"start1":10953,"start2":10953,"length1":36,"length2":36},{"diffs":[[0,"60\">"],[-1,"table[dataLine][i]// "],[0,"Envo"]],"start1":11049,"start2":11049,"length1":29,"length2":8},{"diffs":[[0,"e name=\""],[-1,"wzh9vs47k2trw2seyhxf"],[1,"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\":y~bDA~XRumHh2F$GQ4p\">table</field></block></value><value name=\"INDEX"],[0,"\"><shado"]],"start1":11101,"start2":11101,"length1":36,"length2":318},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"1"],[1,"0"],[0,"</field></shadow"]],"start1":11442,"start2":11442,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"A/%}~4^sYC^,:zE76;]%\">j</field"],[1,"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ruvFMZxQ[c_/p%6zgEDn\">j</field></block></value"],[0,"></b"]],"start1":11522,"start2":11522,"length1":38,"length2":257},{"diffs":[[0,"tionid=\""],[-1,";rGQvE;1Y^?qP`IdR$%9"],[1,"T][}to^pVg#ms8~xW_bZ"],[0,"\"></muta"]],"start1":11875,"start2":11875,"length1":36,"length2":36},{"diffs":[[0,"tionid=\""],[-1,"sr)B7ho(D(2g~b;@ZJf5"],[1,"Br9x~.vgqL*[PI|n`X5J"],[0,"\"></muta"]],"start1":11981,"start2":11981,"length1":36,"length2":36},{"diffs":[[0,"tionid=\""],[-1,"b.Ir.?Fvp7*F6U7W]6Qh"],[1,"y4qquJAUgmATVFUcS3_M"],[0,"\"><arg n"]],"start1":12183,"start2":12183,"length1":36,"length2":36},{"diffs":[[0,"ta\" id=\""],[-1,"wzh9vs47k2trw2seyhxf"],[1,"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse I²C avec bit d'écriture</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i"],[0,"\" type=\""]],"start1":12230,"start2":12230,"length1":36,"length2":493},{"diffs":[[0,"e name=\""],[-1,"wzh9vs47k2trw2seyhxf"],[1,"2b4lmc19alf1uu06jx2i"],[0,"\"><shado"]],"start1":12826,"start2":12826,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,";rGQvE;1Y^?qP`IdR$%9\"></mutation"],[1,"T][}to^pVg#ms8~xW_bZ\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data"],[0,"><ne"]],"start1":12996,"start2":12996,"length1":40,"length2":86},{"diffs":[[0,"AR\" id=\""],[-1,"Dxc;:[0WB.Z#GS$gcp4T"],[1,"wD2@IfWf!f7D(S^*UZNn"],[0,"\">delayC"]],"start1":13130,"start2":13130,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"Dxc;:[0WB.Z#GS$gcp4T"],[1,"wD2@IfWf!f7D(S^*UZNn"],[0,"\">delayC"]],"start1":13665,"start2":13665,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"Dxc;:[0WB.Z#GS$gcp4T"],[1,"wD2@IfWf!f7D(S^*UZNn"],[0,"\">de"]],"start1":13901,"start2":13901,"length1":28,"length2":28},{"diffs":[[0,"AR\" id=\""],[-1,"-T6?nIzcFl{{8-O8_Mq@"],[1,"aQ+RYMKFi!Xo;=-+.`M^"],[0,"\">dataLi"]],"start1":14084,"start2":14084,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"-T6?nIzcFl{{8-O8_Mq@"],[1,"aQ+RYMKFi!Xo;=-+.`M^"],[0,"\">da"]],"start1":14583,"start2":14583,"length1":28,"length2":28},{"diffs":[[0,"/next></block></"],[1,"next></block></next></block></next></block></"],[0,"statement></bloc"]],"start1":15247,"start2":15247,"length1":32,"length2":77},{"diffs":[[0,"x=\"1"],[-1,"236"],[1,"429"],[0,"\" y="]],"start1":15360,"start2":15360,"length1":11,"length2":11},{"diffs":[[0,"id=\""],[-1,"b.Ir.?Fvp7*F6U7W]6Qh"],[1,"y4qquJAUgmATVFUcS3_M"],[0,"\"><a"]],"start1":15410,"start2":15410,"length1":28,"length2":28},{"diffs":[[0,"ta\" id=\""],[-1,"wzh9vs47k2trw2seyhxf"],[1,"2b4lmc19alf1uu06jx2i"],[0,"\" type=\""]],"start1":15453,"start2":15453,"length1":36,"length2":36},{"diffs":[[0,"me=\""],[-1,"wzh9vs47k2trw2seyhxf"],[1,"2b4lmc19alf1uu06jx2i"],[0,"\"><b"]],"start1":15651,"start2":15651,"length1":28,"length2":28},{"diffs":[[0,"AR\" id=\""],[-1,"^|CPoH%2h4Bm9{Bm4:h^"],[1,"VRa~?v^(3;sw+3$^N%yi"],[0,"\">IIC_SC"]],"start1":16168,"start2":16168,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"x]CU)5VfLV!0v[[X%G^A"],[1,"K-p?FQ-6R.C;q[UXkZlp"],[0,"\">IIC_SD"]],"start1":17028,"start2":17028,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"x]CU)5VfLV!0v[[X%G^A"],[1,"K-p?FQ-6R.C;q[UXkZlp"],[0,"\">IIC_SD"]],"start1":17464,"start2":17464,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"^|CPoH%2h4Bm9{Bm4:h^"],[1,"VRa~?v^(3;sw+3$^N%yi"],[0,"\">IIC_SC"]],"start1":18217,"start2":18217,"length1":36,"length2":36},{"diffs":[[0,"nt><"],[-1,"/block></statement></block><block type=\"function_definition\" x=\"2252\" y"],[1,"next><block type=\"device_set_digital_pin\"><comment pinned=\"false\" h=\"80\" w=\"160\">Attendre l'acknowledge</comment><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision"],[0,"=\""],[-1,"2"],[0,"0\"><"],[1,"/"],[0,"mutation"],[-1," name=\"IIC_start\" functionid=\"sr)B7ho(D(2g~b;@ZJf5"],[1,"><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2006\" y=\"20\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J"],[0,"\"></"]],"start1":18729,"start2":18729,"length1":144,"length2":2285},{"diffs":[[0,"AR\" id=\""],[-1,"x]CU)5VfLV!0v[[X%G^A"],[1,"K-p?FQ-6R.C;q[UXkZlp"],[0,"\">IIC_SD"]],"start1":21361,"start2":21361,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"^|CPoH%2h4Bm9{Bm4:h^"],[1,"VRa~?v^(3;sw+3$^N%yi"],[0,"\">IIC_SC"]],"start1":21760,"start2":21760,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"x]CU)5VfLV!0v[[X%G^A"],[1,"K-p?FQ-6R.C;q[UXkZlp"],[0,"\">IIC_SD"]],"start1":22351,"start2":22351,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"^|CPoH%2h4Bm9{Bm4:h^"],[1,"VRa~?v^(3;sw+3$^N%yi"],[0,"\">IIC_SC"]],"start1":22942,"start2":22942,"length1":36,"length2":36},{"diffs":[[0,"x=\"2"],[-1,"753"],[1,"507"],[0,"\" y="]],"start1":23499,"start2":23499,"length1":11,"length2":11},{"diffs":[[0,"id=\""],[-1,";rGQvE;1Y^?qP`IdR$%9"],[1,"T][}to^pVg#ms8~xW_bZ"],[0,"\"></"]],"start1":23548,"start2":23548,"length1":28,"length2":28},{"diffs":[[0,"AR\" id=\""],[-1,"^|CPoH%2h4Bm9{Bm4:h^"],[1,"VRa~?v^(3;sw+3$^N%yi"],[0,"\">IIC_SC"]],"start1":23921,"start2":23921,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"x]CU)5VfLV!0v[[X%G^A"],[1,"K-p?FQ-6R.C;q[UXkZlp"],[0,"\">IIC_SD"]],"start1":24512,"start2":24512,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"^|CPoH%2h4Bm9{Bm4:h^"],[1,"VRa~?v^(3;sw+3$^N%yi"],[0,"\">IIC_SC"]],"start1":25103,"start2":25103,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"x]CU)5VfLV!0v[[X%G^A"],[1,"K-p?FQ-6R.C;q[UXkZlp"],[0,"\">IIC_SD"]],"start1":25694,"start2":25694,"length1":36,"length2":36},{"diffs":[[0," x=\""],[-1,"2155\" y=\"713\"><mutation name=\"montrer_grande_image\" functionid=\"r8a/L6)O(mSOY#U}:;sn\"><arg name=\"image\" id=\"zrpvc47otfg0bjcipsv0q\" type=\"Image\"></arg></mutation><field name=\"function_name\">montrer_grande_image</field><value name=\"zrpvc47otfg0bjcipsv0q\"><block type=\"argument_reporter_custom\"><mutation duplicateondrag=\"true\" typename=\"Image\"></mutation><field name=\"VALUE\">image</field></block></value></block><block type=\"function_definition\" x=\"20\" y=\"3417"],[1,"3008\" y=\"20"],[0,"\"><m"]],"start1":26265,"start2":26265,"length1":466,"length2":19},{"diffs":[[0,"id=\""],[-1,"fVQk:U]=u^NKsDh3/_0v"],[1,"LfI{V~B;ZZR.6Sy#6|a@"],[0,"\"></"]],"start1":26316,"start2":26316,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"^|CPoH%2h4Bm9{Bm4:h^"],[1,"VRa~?v^(3;sw+3$^N%yi"],[0,"\">II"]],"start1":26726,"start2":26726,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"x]CU)5VfLV!0v[[X%G^A"],[1,"K-p?FQ-6R.C;q[UXkZlp"],[0,"\">II"]],"start1":27125,"start2":27125,"length1":28,"length2":28}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"/"],[-1,"**\n * Ligne actuelle des données\n */\nfunction montrer_grande_image (image: Image) {\n\t\n    image.width\n}\n// Fonction : Démarrer la communication I²C\nfunction IIC_start () {\n    pins.digitalWritePin(IIC_SDA, 1)\n    pins.digitalWritePin(IIC_SCL, 1)\n    control.waitMicros(3)\n    pins.digitalWritePin(IIC_SDA, 0)\n    control.waitMicros(3)\n    pins.digitalWritePin(IIC_SCL, 0)\n    control.waitMicros(3)\n}\n"],[1,"/ Définit les broches pour SDA et SCL\nconst IIC_SCL = DigitalPin.P19; // Remplacez par la broche SCL utilisée\nconst IIC_SDA = DigitalPin.P20; // Remplacez par la broche SDA utilisée\n\n// Tableau de données à afficher\nconst table: number[][] = [\n    [0x00, 0x00, 0x00, 0x00, 0x26, 0x41, 0x86, 0x80, 0x80, 0x80, 0x86, 0x41, 0x26, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x22, 0x42, 0x84, 0x42, 0x22, 0x1C, 0x00, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0x20, 0x44, 0x42, 0x84, 0x80, 0x84, 0x42, 0x44, 0x20, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0xC0, 0x40, 0xF8, 0xD8, 0x7E, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00]\n];\n\nlet dataLine = 0; // Ligne actuelle des données\nlet delayCount = 0; "],[0,"// C"]],"start1":0,"start2":0,"length1":405,"length2":722},{"diffs":[[0,"a ligne\n"],[1,"\n"],[0,"// Fonct"]],"start1":744,"start2":744,"length1":16,"length2":17},{"diffs":[[0,"initPins"],[-1," "],[0,"()"],[1,": void"],[0," {\n    p"]],"start1":807,"start2":807,"length1":19,"length2":24},{"diffs":[[0,"(IIC_SCL, 1)"],[1,";"],[0,"\n    pins.di"]],"start1":850,"start2":850,"length1":24,"length2":25},{"diffs":[[0,"_SDA, 1)"],[1,";"],[0,"\n}\n"],[1,"\n"],[0,"// Fonct"]],"start1":892,"start2":892,"length1":19,"length2":21},{"diffs":[[0,"n : "],[-1,"Termin"],[1,"Démarr"],[0,"er l"]],"start1":915,"start2":915,"length1":14,"length2":14},{"diffs":[[0,"IIC_"],[-1,"end ()"],[1,"start(): void"],[0," {\n "]],"start1":958,"start2":958,"length1":14,"length2":21},{"diffs":[[0,"IC_S"],[-1,"CL, 0)\n    control.waitMicros(3)"],[1,"DA, 1);"],[0,"\n   "]],"start1":1004,"start2":1004,"length1":40,"length2":15},{"diffs":[[0,"itePin(IIC_S"],[-1,"DA, 0)"],[1,"CL, 1);"],[0,"\n    control"]],"start1":1034,"start2":1034,"length1":30,"length2":31},{"diffs":[[0,"ol.waitMicros(3)"],[1,";"],[0,"\n    pins.digita"]],"start1":1063,"start2":1063,"length1":32,"length2":33},{"diffs":[[0,"itePin(IIC_S"],[-1,"CL, 1)"],[1,"DA, 0);"],[0,"\n    control"]],"start1":1099,"start2":1099,"length1":30,"length2":31},{"diffs":[[0,"aitMicros(3)"],[1,";"],[0,"\n    pins.di"]],"start1":1132,"start2":1132,"length1":24,"length2":25},{"diffs":[[0,"itePin(IIC_S"],[-1,"DA, 1)"],[1,"CL, 0);"],[0,"\n    control"]],"start1":1164,"start2":1164,"length1":30,"length2":31},{"diffs":[[0,"icros(3)"],[1,";"],[0,"\n}\n"],[1,"\n"],[0,"// Fonct"]],"start1":1201,"start2":1201,"length1":19,"length2":21},{"diffs":[[0,"IIC_send"],[-1," "],[0,"(sendDat"]],"start1":1262,"start2":1262,"length1":17,"length2":16},{"diffs":[[0," number)"],[1,": void"],[0," {\n    f"]],"start1":1280,"start2":1280,"length1":16,"length2":22},{"diffs":[[0,"et i"],[-1,"ndex"],[0," = 0; i"],[-1,"ndex"],[0," < 8; i"],[-1,"ndex"],[0,"++) "]],"start1":1307,"start2":1307,"length1":34,"length2":22},{"diffs":[[0,"(IIC_SCL, 0)"],[1,";"],[0,"\n        con"]],"start1":1359,"start2":1359,"length1":24,"length2":25},{"diffs":[[0,"ol.waitMicros(3)"],[1,";"],[0,"\n        if (sen"]],"start1":1386,"start2":1386,"length1":32,"length2":33},{"diffs":[[0,"(IIC_SDA, 1)"],[1,";"],[0,"\n        } e"]],"start1":1467,"start2":1467,"length1":24,"length2":25},{"diffs":[[0,"_SDA, 0)"],[1,";"],[0,"\n       "]],"start1":1534,"start2":1534,"length1":16,"length2":17},{"diffs":[[0," >>= 1;\n"],[1,"        "],[0,"control."]],"start1":1570,"start2":1570,"length1":16,"length2":24},{"diffs":[[0,"aitMicros(3)"],[1,";"],[0,"\n        pin"]],"start1":1595,"start2":1595,"length1":24,"length2":25},{"diffs":[[0,"_SCL, 1)"],[1,";"],[0,"\n       "]],"start1":1641,"start2":1641,"length1":16,"length2":17},{"diffs":[[0,"s(3)"],[1,";"],[0,"\n    }\n"],[-1,"}\nlet dataLine = 0\nlet delayCount = 0\nlet IIC_SDA = DigitalPin.P20\nlet IIC_SCL = DigitalPin.P19\n\n// Initialiser les broches au démarrage\ninitPins()"],[1,"    // Attendre l'acknowledge\n    pins.digitalWritePin(IIC_SCL, 0);\n    pins.digitalWritePin(IIC_SDA, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 0);\n}\n\n// Fonction : Terminer la communication I²C\nfunction IIC_end(): void {\n    pins.digitalWritePin(IIC_SCL, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 1);\n    control.waitMicros(3);\n}"],[0,"\n\n//"]],"start1":1676,"start2":1676,"length1":162,"length2":587},{"diffs":[[0,"ver("],[-1,"function ()"],[1,"() =>"],[0," {\n    /"],[-1,"/ "],[1,"**"],[0,"****"]],"start1":2294,"start2":2294,"length1":29,"length2":23},{"diffs":[[0,"que ************"],[1,"**/"],[0,"\n    IIC_start()"]],"start1":2359,"start2":2359,"length1":32,"length2":35},{"diffs":[[0,"\n    IIC_start()"],[1,";"],[0,"\n"],[1,"    IIC_send(0x40);         "],[0,"    // Activer l"]],"start1":2378,"start2":2378,"length1":33,"length2":62},{"diffs":[[0,"IIC_"],[-1,"s"],[0,"end("],[-1,"64)\n    IIC_end()"],[1,");\n"],[0,"\n    /"],[-1,"/ "],[1,"**"],[0,"****"]],"start1":2472,"start2":2472,"length1":38,"length2":23},{"diffs":[[0," ***************"],[1,"**/"],[0,"\n    IIC_start()"]],"start1":2533,"start2":2533,"length1":32,"length2":35},{"diffs":[[0," IIC_start()"],[1,";"],[0,"\n"],[1,"    IIC_send(0xC0);         "],[0,"    // Adres"]],"start1":2556,"start2":2556,"length1":25,"length2":54},{"diffs":[[0,"00)\n"],[-1,"    IIC_send(192)\n"],[0,"    //"],[-1," "],[0,"for "]],"start1":2634,"start2":2634,"length1":33,"length2":14},{"diffs":[[0,"{\n    //"],[1,"   "],[0," IIC_sen"]],"start1":2673,"start2":2673,"length1":16,"length2":19},{"diffs":[[0,"e\n    //"],[-1," "],[0,"}"],[1,"\n    IIC_send(1);"],[0,"\n    for"]],"start1":2753,"start2":2753,"length1":18,"length2":34},{"diffs":[[0,"let "],[-1,"j"],[1,"i"],[0," = 0; "],[-1,"j"],[1,"i"],[0," <"],[-1,"="],[0," 15; "],[-1,"j"],[1,"i"],[0,"++) "]],"start1":2789,"start2":2789,"length1":25,"length2":24},{"diffs":[[0,"\n       "],[1,"IIC_send(0);"],[0," //"],[-1," "],[0,"table[da"]],"start1":2814,"start2":2814,"length1":20,"length2":31},{"diffs":[[0,"gne\n"],[-1,"        IIC_send(j)\n"],[0,"    "]],"start1":2888,"start2":2888,"length1":28,"length2":8},{"diffs":[[0,"   IIC_end()"],[1,";\n"],[0,"\n    /"],[-1,"/ "],[1,"**"],[0,"*********** "]],"start1":2899,"start2":2899,"length1":32,"length2":34},{"diffs":[[0,"************"],[1,"*"],[1,"*/"],[0,"\n    IIC_sta"]],"start1":2957,"start2":2957,"length1":24,"length2":27},{"diffs":[[0,"_start()"],[1,";"],[0,"\n"],[1,"    IIC_send(0x8A);         "],[0,"    // R"]],"start1":2980,"start2":2980,"length1":17,"length2":46},{"diffs":[[0,"IIC_"],[-1,"s"],[0,"end("],[-1,"138)\n    IIC_end()"],[1,");\n"],[0,"\n    /"],[-1,"/ "],[1,"*"],[0,"****"]],"start1":3054,"start2":3054,"length1":39,"length2":22},{"diffs":[[0,"********"],[1,"*"],[0," Mise à "]],"start1":3075,"start2":3075,"length1":16,"length2":17},{"diffs":[[0,"********"],[1,"**/"],[0,"\n    del"]],"start1":3116,"start2":3116,"length1":16,"length2":19},{"diffs":[[0,"ount"],[-1," += 1"],[1,"++;"],[0,"\n   "]],"start1":3138,"start2":3138,"length1":13,"length2":11},{"diffs":[[0,"ount = 0"],[1,";"],[0,"\n       "],[1," dataLine = (dataLine + 1) % 4;"],[0," // Pass"]],"start1":3188,"start2":3188,"length1":24,"length2":56},{"diffs":[[0,"    "],[1,"}\n\n"],[0,"    "],[-1,"dataLine = (dataLine + 1) % 4\n    }\n    // Petite pause\n    basic.pause(100)\n})\n"],[1,"basic.pause(100); // Petite pause\n});\n\n// Initialiser les broches au démarrage\ninitPins();"]],"start1":3267,"start2":3267,"length1":88,"length2":101}]}]},{"timestamp":1734891857036,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"id=\""],[-1,"a}D-KxWuVi=[wV59f$^I\">x</variable><variable id=\"N8KLOGT_}35wfxt8Ks78\">y</variable><variable id=\"N)TJN,mtYoBWkZ9-n~~X\">column</variable><variable id=\"%efkvs4mV0#C1wmYjBs=\">rawBuffer</variable><variable id=\"0kmWBROx_0Ay..VT92nQ\">j</variable><variable id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</variable><variable id=\"xmha_W$pQB=lXAP[4:*e\">IIC_SCL</variable><variable id=\",mwjnhi%$#6WJB63~@U^\">image</variable><variable id=\"rP(8:S1Pp,Bv$u(L6},C\">img</variable><variable id=\"![iMZ,:lMdbF@u0ci!.4\">delayCount</variable><variable id=\"B#@xF(bSd%]-VDPb1hp{\">dataLine</variable></variables><comment x=\"1663.859375\" y=\"767\" w=\"260\" h=\"120\">\nLigne actuelle des données\n</comment><block type=\"device_button_event\" x=\"471\" y=\"20\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"montrer_grande_image\" functionid=\"R/S,`T/}Ee(D-]-S=hP%\"><arg name=\"image\" id=\"10lbdnxatsn7114eu407n\" type=\"Image\"></arg></mutation><value name=\"10lbdnxatsn7114eu407n\"><block type=\"variables_get\"><field name=\"VAR\" id=\"rP(8:S1Pp,Bv$u(L6},C\">img</field></block></value></block></statement></block><block type=\"pxt-on-start\" x=\"36\" y=\"57\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let column = 0\" numlines=\"1\" declaredvars=\"column\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let img : Image;\" numlines=\"1\" declaredvars=\"img\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P20</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"xmha_W$pQB=lXAP[4:*e\">IIC_SCL</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19</field></block></value><next><block type=\"function_call\"><mutation name=\"initPins\" functionid=\"}d-jMRX8@y$4I1cuqQ=0\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"rP(8:S1Pp,Bv$u(L6},C\">img</field><value name=\"VALUE\"><shadow type=\"math_number\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"NUM\">0</field></shadow><block type=\"device_build_big_image\"><field name=\"LEDS\">`\n        # . . . . . . . . . \n        # # # . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . .\n        `</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"855\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\"><block type=\"variables_change\"><field name=\"VAR\" id=\"![iMZ,:lMdbF@u0ci!.4\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Mise à jour de la ligne ***************</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"![iMZ,:lMdbF@u0ci!.4\">delayCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"![iMZ,:lMdbF@u0ci!.4\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"B#@xF(bSd%]-VDPb1hp{\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"B#@xF(bSd%]-VDPb1hp{\">dataLine</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Petite pause</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1591\" y=\"20\"><mutation name=\"IIC_send\" functionid=\"+Nfhq,+x}|CB*?fd0Wt+\"><arg name=\"sendData\" id=\"4ou53jijx8rwcgbe6weym\" type=\"number\"></arg></mutation><field name=\"function_name\">IIC_send</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Envoyer un octet via I²C</comment><value name=\"4ou53jijx8rwcgbe6weym\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field></block></value><statement name=\"STACK\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"xmha_W$pQB=lXAP[4:*e\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">sendData &amp; 0x01</field></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"sendData &gt;&gt;= 1;\" numlines=\"1\"></mutation><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"xmha_W$pQB=lXAP[4:*e\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"2168\" y=\"20\"><mutation name=\"IIC_end\" functionid=\"=;oPne9L8,Rp,-CaK/%*\"></mutation><field name=\"function_name\">IIC_end</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Terminer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"xmha_W$pQB=lXAP[4:*e\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"xmha_W$pQB=lXAP[4:*e\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"20\" y=\"767\"><mutation name=\"initPins\" functionid=\"}d-jMRX8@y$4I1cuqQ=0\"></mutation><field name=\"function_name\">initPins</field><comment pinned=\"false\" h=\"80\" w=\"160\">Compteur pour changer la ligne\nFonction : Initialiser l'état des broches</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"xmha_W$pQB=lXAP[4:*e\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></next></block></statement></block><block type=\"function_definition\" x=\"521\" y=\"767\"><mutation name=\"IIC_start\" functionid=\"Kfe*=2A+uKzjRz[Artq7\"></mutation><field name=\"function_name\">IIC_start</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Démarrer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"xmha_W$pQB=lXAP[4:*e\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"xmha_W$pQB=lXAP[4:*e\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1022\" y=\"767\"><mutation name=\"montrer_grande_image\" functionid=\"R/S,`T/}Ee(D-]-S=hP%\"><arg name=\"image\" id=\"10lbdnxatsn7114eu407n\" type=\"Image\"></arg></mutation><field name=\"function_name\">montrer_grande_image</field><comment pinned=\"false\" h=\"80\" w=\"160\">we create the buffer to send</comment><data>0</data><value name=\"10lbdnxatsn7114eu407n\"><block type=\"argument_reporter_custom\"><mutation duplicateondrag=\"true\" typename=\"Image\"></mutation><field name=\"VALUE\">image</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.width()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">16</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"true\"></mutation></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.height()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"true\"></mutation></block></statement><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"a}D-KxWuVi=[wV59f$^I\">x</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.width()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"N8KLOGT_}35wfxt8Ks78\">y</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.height()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.pixel(x, y)</field></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"N)TJN,mtYoBWkZ9-n~~X\">column</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"column &lt;&lt;= 1;\" numlines=\"1\"></mutation></block></next></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"%efkvs4mV0#C1wmYjBs=\">rawBuffer</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"N)TJN,mtYoBWkZ9-n~~X\">column</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Kfe*=2A+uKzjRz[Artq7\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">************ Activer l'incrémentation automatique ************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"+Nfhq,+x}|CB*?fd0Wt+\"><arg name=\"sendData\" id=\"4ou53jijx8rwcgbe6weym\" type=\"number\"></arg></mutation><value name=\"4ou53jijx8rwcgbe6weym\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"=;oPne9L8,Rp,-CaK/%*\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Kfe*=2A+uKzjRz[Artq7\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">********** Envoyer les données d'affichage ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"+Nfhq,+x}|CB*?fd0Wt+\"><arg name=\"sendData\" id=\"4ou53jijx8rwcgbe6weym\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse mémoire de départ (0x00)</comment><value name=\"4ou53jijx8rwcgbe6weym\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"0kmWBROx_0Ay..VT92nQ\">j</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">15</field></shadow></value><statement name=\"DO\"><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"+Nfhq,+x}|CB*?fd0Wt+\"><arg name=\"sendData\" id=\"4ou53jijx8rwcgbe6weym\" type=\"number\"></arg></mutation><value name=\"4ou53jijx8rwcgbe6weym\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"%efkvs4mV0#C1wmYjBs=\">rawBuffer</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0kmWBROx_0Ay..VT92nQ\">j</field></block></value></block></value></block></statement><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"=;oPne9L8,Rp,-CaK/%*\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Kfe*=2A+uKzjRz[Artq7\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Régler la luminosité ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"+Nfhq,+x}|CB*?fd0Wt+\"><arg name=\"sendData\" id=\"4ou53jijx8rwcgbe6weym\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité</comment><value name=\"4ou53jijx8rwcgbe6weym\"><shadow type=\"math_number\"><field name=\"NUM\">138</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"=;oPne9L8,Rp,-CaK/%*\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next"],[1,"x]CU)5VfLV!0v[[X%G^A\">IIC_SDA</variable><variable id=\"^|CPoH%2h4Bm9{Bm4:h^\">IIC_SCL</variable><variable id=\"A/%}~4^sYC^,:zE76;]%\">j</variable><variable id=\"Dxc;:[0WB.Z#GS$gcp4T\">delayCount</variable><variable id=\"-T6?nIzcFl{{8-O8_Mq@\">dataLine</variable><variable id=\"BVz4}YRU/LiyY!O++OM7\">table</variable></variables><comment x=\"520.890625\" y=\"3417\" w=\"260\" h=\"120\">\nLigne actuelle des données\n</comment><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"^|CPoH%2h4Bm9{Bm4:h^\">IIC_SCL</field><comment pinned=\"false\" h=\"80\" w=\"160\">Définit les broches pour SDA et SCL\nRemplacez par la broche SCL utilisée</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"x]CU)5VfLV!0v[[X%G^A\">IIC_SDA</field><comment pinned=\"false\" h=\"80\" w=\"160\">Remplacez par la broche SDA utilisée</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P20</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"BVz4}YRU/LiyY!O++OM7\">table</field><comment pinned=\"false\" h=\"80\" w=\"160\">Tableau de données à afficher</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"4\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD1\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD2\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD3\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"15\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">248</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">216</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">126</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"function draw(image: Buffer)\" line1=\"{\" line2=\"    \" line3=\"}\" numlines=\"4\"></mutation><next><block type=\"function_call\"><mutation name=\"initPins\" functionid=\"fVQk:U]=u^NKsDh3/_0v\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"500\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"sr)B7ho(D(2g~b;@ZJf5\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">************ Activer l'incrémentation automatique ************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"b.Ir.?Fvp7*F6U7W]6Qh\"><arg name=\"sendData\" id=\"wzh9vs47k2trw2seyhxf\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Activer l'incrémentation automatique</comment><value name=\"wzh9vs47k2trw2seyhxf\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\";rGQvE;1Y^?qP`IdR$%9\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"sr)B7ho(D(2g~b;@ZJf5\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">********** Envoyer les données d'affichage ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"b.Ir.?Fvp7*F6U7W]6Qh\"><arg name=\"sendData\" id=\"wzh9vs47k2trw2seyhxf\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse mémoire de départ (0x00)</comment><value name=\"wzh9vs47k2trw2seyhxf\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><next><block type=\"pxt_controls_for\"><comment pinned=\"false\" h=\"80\" w=\"160\">for (let i = 0; i &lt; 16; i++) {\nIIC_send(i); //table[dataLine][i]// Envoi des données ligne par ligne\n}</comment><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"A/%}~4^sYC^,:zE76;]%\">j</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">15</field></shadow></value><statement name=\"DO\"><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"b.Ir.?Fvp7*F6U7W]6Qh\"><arg name=\"sendData\" id=\"wzh9vs47k2trw2seyhxf\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">table[dataLine][i]// Envoi des données ligne par ligne</comment><value name=\"wzh9vs47k2trw2seyhxf\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A/%}~4^sYC^,:zE76;]%\">j</field></block></value></block></statement><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\";rGQvE;1Y^?qP`IdR$%9\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"sr)B7ho(D(2g~b;@ZJf5\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Régler la luminosité ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"b.Ir.?Fvp7*F6U7W]6Qh\"><arg name=\"sendData\" id=\"wzh9vs47k2trw2seyhxf\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité</comment><value name=\"wzh9vs47k2trw2seyhxf\"><shadow type=\"math_number\"><field name=\"NUM\">138</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\";rGQvE;1Y^?qP`IdR$%9\"></mutation><next><block type=\"variables_change\"><field name=\"VAR\" id=\"Dxc;:[0WB.Z#GS$gcp4T\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Mise à jour de la ligne ***************</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Dxc;:[0WB.Z#GS$gcp4T\">delayCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"Dxc;:[0WB.Z#GS$gcp4T\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"-T6?nIzcFl{{8-O8_Mq@\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"-T6?nIzcFl{{8-O8_Mq@\">dataLine</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Petite pause</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1236\" y=\"20\"><mutation name=\"IIC_send\" functionid=\"b.Ir.?Fvp7*F6U7W]6Qh\"><arg name=\"sendData\" id=\"wzh9vs47k2trw2seyhxf\" type=\"number\"></arg></mutation><field name=\"function_name\">IIC_send</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Envoyer un octet via I²C</comment><value name=\"wzh9vs47k2trw2seyhxf\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field></block></value><statement name=\"STACK\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^|CPoH%2h4Bm9{Bm4:h^\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">sendData &amp; 0x01</field></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"x]CU)5VfLV!0v[[X%G^A\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"x]CU)5VfLV!0v[[X%G^A\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"sendData &gt;&gt;= 1;\" numlines=\"1\"></mutation><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^|CPoH%2h4Bm9{Bm4:h^\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"2252\" y=\"20\"><mutation name=\"IIC_start\" functionid=\"sr)B7ho(D(2g~b;@ZJf5\"></mutation><field name=\"function_name\">IIC_start</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Démarrer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"x]CU)5VfLV!0v[[X%G^A\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^|CPoH%2h4Bm9{Bm4:h^\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"x]CU)5VfLV!0v[[X%G^A\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^|CPoH%2h4Bm9{Bm4:h^\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2753\" y=\"20\"><mutation name=\"IIC_end\" functionid=\";rGQvE;1Y^?qP`IdR$%9\"></mutation><field name=\"function_name\">IIC_end</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Terminer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^|CPoH%2h4Bm9{Bm4:h^\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"x]CU)5VfLV!0v[[X%G^A\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^|CPoH%2h4Bm9{Bm4:h^\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"x]CU)5VfLV!0v[[X%G^A\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2155\" y=\"713\"><mutation name=\"montrer_grande_image\" functionid=\"r8a/L6)O(mSOY#U}:;sn\"><arg name=\"image\" id=\"zrpvc47otfg0bjcipsv0q\" type=\"Image\"></arg></mutation><field name=\"function_name\">montrer_grande_image</field><value name=\"zrpvc47otfg0bjcipsv0q\"><block type=\"argument_reporter_custom\"><mutation duplicateondrag=\"true\" typename=\"Image\"></mutation><field name=\"VALUE\">image</field></block></value></block><block type=\"function_definition\" x=\"20\" y=\"3417\"><mutation name=\"initPins\" functionid=\"fVQk:U]=u^NKsDh3/_0v\"></mutation><field name=\"function_name\">initPins</field><comment pinned=\"false\" h=\"80\" w=\"160\">Compteur pour changer la ligne\nFonction : Initialiser l'état des broches</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^|CPoH%2h4Bm9{Bm4:h^\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"x]CU)5VfLV!0v[[X%G^A\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value"],[0,"></b"]],"start1":76,"start2":76,"length1":21892,"length2":23927}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0," */\n"],[-1,"// we create the buffer to send\n"],[0,"func"]],"start1":34,"start2":34,"length1":40,"length2":8},{"diffs":[[0,") {\n"],[-1,"    let rawBuffer: number[] = []"],[1,"\t"],[0,"\n    "],[-1,"if ("],[0,"imag"]],"start1":81,"start2":81,"length1":49,"length2":14},{"diffs":[[0,"idth"],[-1,"() != 16) {\n        return\n    }\n    if (image.height() != 8) {\n        return\n    }\n    for (let x = 0; x <= image.width() - 1; x++) {\n        for (let y = 0; y <= image.height() - 1; y++) {\n            if (image.pixel(x, y)) {\n                column += 1\n            }\n            column <<= 1;\n        }\n        rawBuffer.push(column)\n    }\n    // ************ Activer l'incrémentation automatique ************\n    IIC_start()\n    IIC_send(64)\n    IIC_end()\n    // ********** Envoyer les données d'affichage ***************\n    IIC_start()\n    // Adresse mémoire de départ (0x00)\n    IIC_send(192)\n    for (let j = 0; j <= 15; j++) {\n        IIC_send(rawBuffer[j])\n    }\n    IIC_end()\n    // *********** Régler la luminosité ***************\n    IIC_start()\n    // Réglage de la luminosité\n    IIC_send(138)\n    IIC_end()"],[0,"\n}\n/"]],"start1":98,"start2":98,"length1":831,"length2":8},{"diffs":[[0,")\n}\n"],[-1,"input.onButtonPressed(Button.A, function () {\n    montrer_grande_image(img)\n})\n"],[0,"// F"]],"start1":575,"start2":575,"length1":87,"length2":8},{"diffs":[[0,"let "],[-1,"IIC_SCL = 0\nlet IIC_SDA = 0\nlet column = 0\nlet img : Image;\n"],[0,"IIC_"]],"start1":1403,"start2":1403,"length1":68,"length2":8},{"diffs":[[0,"Pin.P20\n"],[1,"let "],[0,"IIC_SCL "]],"start1":1424,"start2":1424,"length1":16,"length2":20},{"diffs":[[0,"Pin.P19\n"],[1,"\n"],[0,"// Initi"]],"start1":1453,"start2":1453,"length1":16,"length2":17},{"diffs":[[0,"s()\n"],[-1,"img = images.createBigImage(`\n    # . . . . . . . . .\n    # # # . . . . . . .\n    # . . . . . . . . .\n    # . . . . . . . . .\n    # . . . . . . . . .\n    `)\n// Programme principal\nbasic.forever(function () {"],[1,"\n// Programme principal\nbasic.forever(function () {\n    // ************ Activer l'incrémentation automatique ************\n    IIC_start()\n    // Activer l'incrémentation automatique\n    IIC_send(64)\n    IIC_end()\n    // ********** Envoyer les données d'affichage ***************\n    IIC_start()\n    // Adresse mémoire de départ (0x00)\n    IIC_send(192)\n    // for (let i = 0; i < 16; i++) {\n    // IIC_send(i); //table[dataLine][i]// Envoi des données ligne par ligne\n    // }\n    for (let j = 0; j <= 15; j++) {\n        // table[dataLine][i]// Envoi des données ligne par ligne\n        IIC_send(j)\n    }\n    IIC_end()\n    // *********** Régler la luminosité ***************\n    IIC_start()\n    // Réglage de la luminosité\n    IIC_send(138)\n    IIC_end()"],[0,"\n   "]],"start1":1509,"start2":1509,"length1":215,"length2":762}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":251,"start2":251,"length1":21,"length2":17}]}]},{"timestamp":1734892462327,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"=\"16"],[-1,"27"],[1,"63.859375"],[0,"\" y=\"7"],[-1,"10"],[1,"67"],[0,"\" w="]],"start1":663,"start2":663,"length1":18,"length2":25},{"diffs":[[0,"x=\"4"],[-1,"35"],[1,"71"],[0,"\" y=\""],[-1,"-37"],[1,"20"],[0,"\"><f"]],"start1":774,"start2":774,"length1":18,"length2":17},{"diffs":[[0,"pe=\""],[-1,"function_definition"],[1,"pxt-on-start"],[0,"\" x=\""],[-1,"1604"],[1,"36"],[0,"\" y=\""],[-1,"-86\"><mutation name=\"IIC_send\" functionid=\"+Nfhq,+x}|CB*?fd0Wt+\"><arg name=\"sendData\" id=\"4ou53jijx8rwcgbe6weym\" type=\"number\"></arg"],[1,"57\"><statement name=\"HANDLER\"><block type=\"typescript_statement\""],[0,"><"],[-1,"/"],[0,"mutation"],[-1,"><field name=\"function_name\">IIC_send</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Envoyer un octet via I²C</comment><value name=\"4ou53jijx8rwcgbe6weym\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field"],[1," xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let column = 0\" numlines=\"1\" declaredvars=\"column\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let img : Image;\" numlines=\"1\" declaredvars=\"img\"></mutation><next"],[0,"><"],[-1,"/"],[0,"block"],[-1,"></value><statement name=\"STACK\"><block type=\"controls_repeat_ext\""],[1," type=\"variables_set\"><field name=\"VAR\" id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field"],[0,"><va"]],"start1":1197,"start2":1197,"length1":541,"length2":461},{"diffs":[[0,"me=\""],[-1,"TIMES"],[1,"VALUE"],[0,"\"><s"]],"start1":1664,"start2":1664,"length1":13,"length2":13},{"diffs":[[0,"adow type=\"math_"],[-1,"whole_"],[0,"number\"><field n"]],"start1":1678,"start2":1678,"length1":38,"length2":32},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"8"],[1,"0"],[0,"</field></shadow"]],"start1":1704,"start2":1704,"length1":33,"length2":33},{"diffs":[[0,"ow><"],[-1,"/value><statement name=\"DO\"><"],[0,"bloc"]],"start1":1735,"start2":1735,"length1":37,"length2":8},{"diffs":[[0,"block type=\""],[-1,"device_set_"],[0,"digital_pin\""]],"start1":1739,"start2":1739,"length1":35,"length2":24},{"diffs":[[0,"n\"><"],[-1,"value name=\"name\"><shadow type=\"digital_pin_shadow\"><"],[0,"fiel"]],"start1":1761,"start2":1761,"length1":61,"length2":8},{"diffs":[[0,"in\">DigitalPin.P"],[1,"2"],[0,"0</field></shado"]],"start1":1778,"start2":1778,"length1":32,"length2":33},{"diffs":[[0,"in.P20</field></"],[-1,"shadow"],[1,"block></value><next"],[0,"><block type=\"va"]],"start1":1790,"start2":1790,"length1":38,"length2":51},{"diffs":[[0,"type=\"variables_"],[-1,"g"],[1,"s"],[0,"et\"><field name="]],"start1":1833,"start2":1833,"length1":33,"length2":33},{"diffs":[[0,"/field><"],[-1,"/block></value><"],[0,"value na"]],"start1":1906,"start2":1906,"length1":32,"length2":16},{"diffs":[[0,"ld><value name=\""],[-1,"value"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":1910,"start2":1910,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0"],[1,"\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19"],[0,"</fi"]],"start1":1954,"start2":1954,"length1":90,"length2":104},{"diffs":[[0,"in.P19</field></"],[-1,"shadow"],[1,"block"],[0,"></value><next><"]],"start1":2048,"start2":2048,"length1":38,"length2":37},{"diffs":[[0,"pe=\""],[-1,"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax"],[1,"function_call\"><mutation name=\"initPins\" functionid=\"}d-jMRX8@y$4I1cuqQ=0"],[0,"\"><"],[1,"/"],[0,"mutation"],[-1," min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation"],[1,"><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"rP(8:S1Pp,Bv$u(L6},C\">img</field"],[0,"><va"]],"start1":2093,"start2":2093,"length1":242,"length2":267},{"diffs":[[0,"ld><value name=\""],[-1,"IF0"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":2354,"start2":2354,"length1":35,"length2":37},{"diffs":[[0,"hadow type=\""],[-1,"logic_boolean"],[1,"math_number\" disabled-reasons=\"MANUALLY_DISABLED"],[0,"\"><field nam"]],"start1":2379,"start2":2379,"length1":37,"length2":72},{"diffs":[[0,"field name=\""],[-1,"BOOL\">TRUE"],[1,"NUM\">0"],[0,"</field></sh"]],"start1":2442,"start2":2442,"length1":34,"length2":30},{"diffs":[[0,"pe=\""],[-1,"typescript_expression\"><field name=\"EXPRESSION\">sendData &amp; 0x01</field></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow"],[1,"device_build_big_image\"><field name=\"LEDS\">`\n        # . . . . . . . . . \n        # # # . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . .\n        `</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"855\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\""],[0,"><bl"]],"start1":2486,"start2":2486,"length1":258,"length2":470},{"diffs":[[0,"type=\"variables_"],[1,"chan"],[0,"ge"],[-1,"t"],[0,"\"><field name=\"V"]],"start1":2960,"start2":2960,"length1":35,"length2":38},{"diffs":[[0,"id=\""],[-1,"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field></block></value"],[1,"![iMZ,:lMdbF@u0ci!.4\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Mise à jour de la ligne ***************</comment"],[0,"><va"]],"start1":3002,"start2":3002,"length1":60,"length2":147},{"diffs":[[0,"nt><value name=\""],[-1,"value"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":3143,"start2":3143,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":3187,"start2":3187,"length1":67,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">1</field></sha"]],"start1":3190,"start2":3190,"length1":38,"length2":35},{"diffs":[[0,"ue><"],[-1,"/block></statement><statement name=\"ELSE\"><block type=\"device_set_digital_pin\""],[1,"next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field"],[0,"><va"]],"start1":3234,"start2":3234,"length1":86,"length2":181},{"diffs":[[0,"ld><value name=\""],[-1,"name"],[1,"A"],[0,"\"><shadow type=\""]],"start1":3409,"start2":3409,"length1":36,"length2":33},{"diffs":[[0,"pe=\""],[-1,"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P"],[1,"math_number\"><field name=\"NUM\">"],[0,"0</f"]],"start1":3438,"start2":3438,"length1":58,"length2":39},{"diffs":[[0,"id=\""],[-1,"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA"],[1,"![iMZ,:lMdbF@u0ci!.4\">delayCount"],[0,"</fi"]],"start1":3537,"start2":3537,"length1":37,"length2":40},{"diffs":[[0,"ue><value name=\""],[-1,"value"],[1,"B"],[0,"\"><shadow type=\""]],"start1":3594,"start2":3594,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":3634,"start2":3634,"length1":67,"length2":9},{"diffs":[[0,"field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">"],[1,"1"],[0,"0</field></s"]],"start1":3641,"start2":3641,"length1":32,"length2":30},{"diffs":[[0,"value></block></"],[1,"value><"],[0,"statement><next>"]],"start1":3679,"start2":3679,"length1":32,"length2":39},{"diffs":[[0,"value><statement"],[-1,"><next"],[1," name=\"DO0\""],[0,"><block type=\"ty"]],"start1":3695,"start2":3695,"length1":38,"length2":43},{"diffs":[[0,"pe=\""],[-1,"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"sendData &gt;&gt;= 1;\" numlines=\"1"],[1,"variables_set\"><field name=\"VAR\" id=\"![iMZ,:lMdbF@u0ci!.4\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM"],[0,"\">"],[1,"0"],[0,"</"],[-1,"mutation><next><block type=\"control_wait_us\""],[1,"field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"B#@xF(bSd%]-VDPb1hp{\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante</comment"],[0,"><va"]],"start1":3732,"start2":3732,"length1":166,"length2":344},{"diffs":[[0,"nt><value name=\""],[-1,"micros"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":4070,"start2":4070,"length1":38,"length2":37},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation"],[1,"\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\""],[0,"><fi"]],"start1":4114,"start2":4114,"length1":70,"length2":121},{"diffs":[[0,"field name=\""],[-1,"SLIDER\">3"],[1,"NUM\">0"],[0,"</field></sh"]],"start1":4233,"start2":4233,"length1":33,"length2":30},{"diffs":[[0,"ow><"],[-1,"/value><next><block type=\"device_set_digital_pin\""],[1,"block type=\"math_arithmetic\"><field name=\"OP\">ADD</field"],[0,"><va"]],"start1":4265,"start2":4265,"length1":57,"length2":64},{"diffs":[[0,"ld><value name=\""],[-1,"name"],[1,"A"],[0,"\"><shadow type=\""]],"start1":4323,"start2":4323,"length1":36,"length2":33},{"diffs":[[0,"pe=\""],[-1,"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P"],[1,"math_number\"><field name=\"NUM\">"],[0,"0</f"]],"start1":4352,"start2":4352,"length1":58,"length2":39},{"diffs":[[0,"id=\""],[-1,"xmha_W$pQB=lXAP[4:*e\">IIC_SCL"],[1,"B#@xF(bSd%]-VDPb1hp{\">dataLine"],[0,"</fi"]],"start1":4451,"start2":4451,"length1":37,"length2":38},{"diffs":[[0,"ue><value name=\""],[-1,"value"],[1,"B"],[0,"\"><shadow type=\""]],"start1":4506,"start2":4506,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":4546,"start2":4546,"length1":67,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">1</field></sha"]],"start1":4549,"start2":4549,"length1":38,"length2":35},{"diffs":[[0,"ue><"],[-1,"next><block type=\"control_wait_us\""],[1,"/block></value"],[0,"><va"]],"start1":4593,"start2":4593,"length1":42,"length2":22},{"diffs":[[0,"ue><value name=\""],[-1,"micros"],[1,"DIVISOR"],[0,"\"><shadow type=\""]],"start1":4609,"start2":4609,"length1":38,"length2":39},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":4655,"start2":4655,"length1":70,"length2":9},{"diffs":[[0,"field name=\""],[-1,"SLIDER\">3"],[1,"NUM\">4"],[0,"</field></sh"]],"start1":4662,"start2":4662,"length1":33,"length2":30},{"diffs":[[0,"value></block></"],[-1,"next"],[1,"value"],[0,"></block></next>"]],"start1":4699,"start2":4699,"length1":36,"length2":37},{"diffs":[[0,"k></"],[1,"statement><"],[0,"next><"],[-1,"/"],[0,"block"],[-1,"></next></block></next"],[1," type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Petite pause</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value"],[0,"></b"]],"start1":4742,"start2":4742,"length1":42,"length2":202},{"diffs":[[0,"t></block></"],[-1,"statemen"],[1,"nex"],[0,"t></block></"]],"start1":4954,"start2":4954,"length1":32,"length2":27},{"diffs":[[0,"pe=\""],[-1,"pxt-on-start"],[1,"function_definition"],[0,"\" x=\""],[-1,"0"],[1,"1591"],[0,"\" y=\""],[1,"2"],[0,"0\"><"],[-1,"statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let column = 0\" numlines=\"1\" declaredvars=\"column\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let img : Image;\" numlines=\"1\" declaredvars=\"img\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field"],[1,"mutation name=\"IIC_send\" functionid=\"+Nfhq,+x}|CB*?fd0Wt+\"><arg name=\"sendData\" id=\"4ou53jijx8rwcgbe6weym\" type=\"number\"></arg></mutation><field name=\"function_name\">IIC_send</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Envoyer un octet via I²C</comment><value name=\"4ou53jijx8rwcgbe6weym\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field></block></value><statement name=\"STACK\"><block type=\"controls_repeat_ext\""],[0,"><va"]],"start1":5008,"start2":5008,"length1":459,"length2":540},{"diffs":[[0,"t\"><value name=\""],[-1,"VALUE"],[1,"TIMES"],[0,"\"><shadow type=\""]],"start1":5542,"start2":5542,"length1":37,"length2":37},{"diffs":[[0,"adow type=\"math_"],[1,"whole_"],[0,"number\"><field n"]],"start1":5568,"start2":5568,"length1":32,"length2":38},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"0"],[1,"8"],[0,"</field></shadow"]],"start1":5600,"start2":5600,"length1":33,"length2":33},{"diffs":[[0,"field></shadow><"],[1,"/value><statement name=\"DO\"><"],[0,"block type=\"digi"]],"start1":5619,"start2":5619,"length1":32,"length2":61},{"diffs":[[0,"O\"><block type=\""],[1,"device_set_"],[0,"digital_pin\"><fi"]],"start1":5660,"start2":5660,"length1":32,"length2":43},{"diffs":[[0,"t_digital_pin\"><"],[1,"value name=\"name\"><shadow type=\"digital_pin_shadow\"><"],[0,"field name=\"pin\""]],"start1":5685,"start2":5685,"length1":32,"length2":85},{"diffs":[[0,"in\">DigitalPin.P"],[-1,"2"],[0,"0</field></block"]],"start1":5767,"start2":5767,"length1":33,"length2":32},{"diffs":[[0,"field></"],[-1,"block></value><next"],[1,"shadow"],[0,"><block "]],"start1":5786,"start2":5786,"length1":35,"length2":22},{"diffs":[[0,"type=\"variables_"],[-1,"s"],[1,"g"],[0,"et\"><field name="]],"start1":5808,"start2":5808,"length1":33,"length2":33},{"diffs":[[0,"IIC_SCL</field><"],[1,"/block></value><"],[0,"value name=\"VALU"]],"start1":5873,"start2":5873,"length1":32,"length2":48},{"diffs":[[0,"ue><value name=\""],[-1,"VALUE"],[1,"value"],[0,"\"><shadow type=\""]],"start1":5901,"start2":5901,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19"],[1,"_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0"],[0,"</fi"]],"start1":5945,"start2":5945,"length1":104,"length2":90},{"diffs":[[0,"DER\">0</field></"],[-1,"block"],[1,"shadow"],[0,"></value><next><"]],"start1":6025,"start2":6025,"length1":37,"length2":38},{"diffs":[[0,"pe=\""],[-1,"function_call\"><mutation name=\"initPins\" functionid=\"}d-jMRX8@y$4I1cuqQ=0\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"rP(8:S1Pp,Bv$u(L6},C\">img</field"],[1,"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation"],[0,"><va"]],"start1":6071,"start2":6071,"length1":267,"length2":242},{"diffs":[[0,"on><value name=\""],[-1,"VALUE"],[1,"IF0"],[0,"\"><shadow type=\""]],"start1":6307,"start2":6307,"length1":37,"length2":35},{"diffs":[[0,"pe=\""],[-1,"math_number\" disabled-reasons=\"MANUALLY_DISABLED"],[1,"logic_boolean"],[0,"\"><f"]],"start1":6338,"start2":6338,"length1":56,"length2":21},{"diffs":[[0,"n\"><field name=\""],[-1,"NUM\">0"],[1,"BOOL\">TRUE"],[0,"</field></shadow"]],"start1":6354,"start2":6354,"length1":38,"length2":42},{"diffs":[[0,"pe=\""],[-1,"device_build_big_image\"><field name=\"LEDS\">`\n        # . . . . . . . . . \n        # # # . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . .\n        `</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"819\" y=\"-37\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\""],[1,"typescript_expression\"><field name=\"EXPRESSION\">sendData &amp; 0x01</field></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow"],[0,"><bl"]],"start1":6406,"start2":6406,"length1":471,"length2":258},{"diffs":[[0,"type=\"variables_"],[-1,"chan"],[0,"ge"],[1,"t"],[0,"\"><field name=\"V"]],"start1":6668,"start2":6668,"length1":38,"length2":35},{"diffs":[[0,"id=\""],[-1,"![iMZ,:lMdbF@u0ci!.4\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Mise à jour de la ligne ***************</comment"],[1,"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field></block></value"],[0,"><va"]],"start1":6707,"start2":6707,"length1":147,"length2":60},{"diffs":[[0,"ue><value name=\""],[-1,"VALUE"],[1,"value"],[0,"\"><shadow type=\""]],"start1":6761,"start2":6761,"length1":37,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":6793,"start2":6793,"length1":33,"length2":91},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">1</field></sha"]],"start1":6866,"start2":6866,"length1":35,"length2":38},{"diffs":[[0,"ue><"],[-1,"next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field"],[1,"/block></statement><statement name=\"ELSE\"><block type=\"device_set_digital_pin\""],[0,"><va"]],"start1":6913,"start2":6913,"length1":181,"length2":86},{"diffs":[[0,"n\"><value name=\""],[-1,"A"],[1,"name"],[0,"\"><shadow type=\""]],"start1":6993,"start2":6993,"length1":33,"length2":36},{"diffs":[[0,"pe=\""],[-1,"math_number\"><field name=\"NUM\">"],[1,"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P"],[0,"0</f"]],"start1":7025,"start2":7025,"length1":39,"length2":58},{"diffs":[[0,"id=\""],[-1,"![iMZ,:lMdbF@u0ci!.4\">delayCount"],[1,"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA"],[0,"</fi"]],"start1":7143,"start2":7143,"length1":40,"length2":37},{"diffs":[[0,"ue><value name=\""],[-1,"B"],[1,"value"],[0,"\"><shadow type=\""]],"start1":7197,"start2":7197,"length1":33,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":7229,"start2":7229,"length1":33,"length2":91},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">"],[-1,"1"],[0,"0</field></shado"]],"start1":7302,"start2":7302,"length1":38,"length2":40},{"diffs":[[0,"value></block></"],[-1,"value><"],[0,"statement name=\""]],"start1":7346,"start2":7346,"length1":39,"length2":32},{"diffs":[[0,"></statement"],[-1," name=\"DO0\""],[1,"><next"],[0,"><block type"]],"start1":7359,"start2":7359,"length1":35,"length2":30},{"diffs":[[0,"pe=\""],[-1,"variables_set\"><field name=\"VAR\" id=\"![iMZ,:lMdbF@u0ci!.4\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM"],[1,"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"sendData &gt;&gt;= 1;\" numlines=\"1"],[0,"\">"],[-1,"0"],[0,"</"],[-1,"field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"B#@xF(bSd%]-VDPb1hp{\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante</comment"],[1,"mutation><next><block type=\"control_wait_us\""],[0,"><va"]],"start1":7387,"start2":7387,"length1":344,"length2":166},{"diffs":[[0,"s\"><value name=\""],[-1,"VALUE"],[1,"micros"],[0,"\"><shadow type=\""]],"start1":7547,"start2":7547,"length1":37,"length2":38},{"diffs":[[0,"mber"],[-1,"\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\""],[1,"_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation"],[0,"><fi"]],"start1":7592,"start2":7592,"length1":121,"length2":70},{"diffs":[[0,"on><field name=\""],[-1,"NUM\">0"],[1,"SLIDER\">3"],[0,"</field></shadow"]],"start1":7656,"start2":7656,"length1":38,"length2":41},{"diffs":[[0,"ow><"],[-1,"block type=\"math_arithmetic\"><field name=\"OP\">ADD</field"],[1,"/value><next><block type=\"device_set_digital_pin\""],[0,"><va"]],"start1":7695,"start2":7695,"length1":64,"length2":57},{"diffs":[[0,"n\"><value name=\""],[-1,"A"],[1,"name"],[0,"\"><shadow type=\""]],"start1":7746,"start2":7746,"length1":33,"length2":36},{"diffs":[[0,"pe=\""],[-1,"math_number\"><field name=\"NUM\">"],[1,"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P"],[0,"0</f"]],"start1":7778,"start2":7778,"length1":39,"length2":58},{"diffs":[[0,"id=\""],[-1,"B#@xF(bSd%]-VDPb1hp{\">dataLine"],[1,"xmha_W$pQB=lXAP[4:*e\">IIC_SCL"],[0,"</fi"]],"start1":7896,"start2":7896,"length1":38,"length2":37},{"diffs":[[0,"ue><value name=\""],[-1,"B"],[1,"value"],[0,"\"><shadow type=\""]],"start1":7950,"start2":7950,"length1":33,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":7982,"start2":7982,"length1":33,"length2":91},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">1</field></sha"]],"start1":8055,"start2":8055,"length1":35,"length2":38},{"diffs":[[0,"ow></value><"],[-1,"/block></value"],[1,"next><block type=\"control_wait_us\""],[0,"><value name"]],"start1":8094,"start2":8094,"length1":38,"length2":58},{"diffs":[[0,"s\"><value name=\""],[-1,"DIVISOR"],[1,"micros"],[0,"\"><shadow type=\""]],"start1":8138,"start2":8138,"length1":39,"length2":38},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":8171,"start2":8171,"length1":33,"length2":94},{"diffs":[[0,"on><field name=\""],[-1,"NUM\">4"],[1,"SLIDER\">3"],[0,"</field></shadow"]],"start1":8247,"start2":8247,"length1":38,"length2":41},{"diffs":[[0,"value></block></"],[-1,"value"],[1,"next"],[0,"></block></next>"]],"start1":8291,"start2":8291,"length1":37,"length2":36},{"diffs":[[0,"k></"],[-1,"statement><"],[0,"next><"],[1,"/"],[0,"block"],[-1," type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Petite pause</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value"],[1,"></next></block></next"],[0,"></b"]],"start1":8333,"start2":8333,"length1":202,"length2":42},{"diffs":[[0,"/next></block></"],[-1,"nex"],[1,"statemen"],[0,"t></block></stat"]],"start1":8381,"start2":8381,"length1":35,"length2":40},{"diffs":[[0,"=\"21"],[-1,"32"],[1,"68"],[0,"\" y=\""],[-1,"-37"],[1,"20"],[0,"\"><m"]],"start1":8470,"start2":8470,"length1":18,"length2":17},{"diffs":[[0," x=\""],[-1,"-16"],[1,"20"],[0,"\" y=\"7"],[-1,"10"],[1,"67"],[0,"\"><m"]],"start1":11235,"start2":11235,"length1":19,"length2":18},{"diffs":[[0," x=\""],[-1,"485"],[1,"521"],[0,"\" y=\"7"],[-1,"10"],[1,"67"],[0,"\"><m"]],"start1":12379,"start2":12379,"length1":19,"length2":19},{"diffs":[[0,"\"102"],[-1,"1"],[1,"2"],[0,"\" y=\"7"],[-1,"3"],[1,"6"],[0,"7\"><"]],"start1":14946,"start2":14946,"length1":16,"length2":16}]}]},{"timestamp":1734892462829,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ble id=\""],[-1,"79:[6=Of);hFn00R`(C#"],[1,"a}D-KxWuVi=[wV59f$^I"],[0,"\">x</var"]],"start1":72,"start2":72,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"r$iWHmrW58TFC=?kT-VS"],[1,"N8KLOGT_}35wfxt8Ks78"],[0,"\">y</var"]],"start1":120,"start2":120,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"~d2a#F`uz(DWikU`u;=;"],[1,"N)TJN,mtYoBWkZ9-n~~X"],[0,"\">column"]],"start1":168,"start2":168,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"]ctIo5j1xByB,Trs|ib6"],[1,"%efkvs4mV0#C1wmYjBs="],[0,"\">rawBuf"]],"start1":221,"start2":221,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"oyX[6inR1=5`hky$Y2eB"],[1,"0kmWBROx_0Ay..VT92nQ"],[0,"\">j</var"]],"start1":277,"start2":277,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"P_~naMq#;Ba@]1qYa7oO"],[1,"#mZ`1,4c9!gHcB~/TxqA"],[0,"\">IIC_SD"]],"start1":325,"start2":325,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"];=E?/,gAyEy0Xf9N$M7"],[1,"xmha_W$pQB=lXAP[4:*e"],[0,"\">IIC_SC"]],"start1":379,"start2":379,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"*aofJFzA-r~{-_%j~*t~"],[1,",mwjnhi%$#6WJB63~@U^"],[0,"\">im"]],"start1":437,"start2":437,"length1":28,"length2":28},{"diffs":[[0,"ble id=\""],[-1,"%Z[W(0?IPLX]5R5~OtPR"],[1,"rP(8:S1Pp,Bv$u(L6},C"],[0,"\">img</v"]],"start1":485,"start2":485,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"(Q;F_%J6$j2a_D;?J}}O"],[1,"![iMZ,:lMdbF@u0ci!.4"],[0,"\">delayC"]],"start1":535,"start2":535,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"4]6eG8oPFHtTj,|fvH]L"],[1,"B#@xF(bSd%]-VDPb1hp{"],[0,"\">dataLi"]],"start1":592,"start2":592,"length1":36,"length2":36},{"diffs":[[0,"x=\"1"],[-1,"466"],[1,"627"],[0,"\" y=\""],[-1,"485"],[1,"710"],[0,"\" w="]],"start1":662,"start2":662,"length1":19,"length2":19},{"diffs":[[0,"/comment><block "],[1,"type=\"device_button_event\" x=\"435\" y=\"-37\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"montrer_grande_image\" functionid=\"R/S,`T/}Ee(D-]-S=hP%\"><arg name=\"image\" id=\"10lbdnxatsn7114eu407n\" type=\"Image\"></arg></mutation><value name=\"10lbdnxatsn7114eu407n\"><block type=\"variables_get\"><field name=\"VAR\" id=\"rP(8:S1Pp,Bv$u(L6},C\">img</field></block></value></block></statement></block><block "],[0,"type=\"function_d"]],"start1":724,"start2":724,"length1":32,"length2":481},{"diffs":[[0,"x=\"1"],[-1,"596"],[1,"604"],[0,"\" y=\"-"],[-1,"463"],[1,"86"],[0,"\"><m"]],"start1":1216,"start2":1216,"length1":20,"length2":19},{"diffs":[[0,"tionid=\""],[-1,"D!fc%(yRDof9$1Z5BO2O"],[1,"+Nfhq,+x}|CB*?fd0Wt+"],[0,"\"><arg n"]],"start1":1263,"start2":1263,"length1":36,"length2":36},{"diffs":[[0,"ta\" id=\""],[-1,"oo8c1g4iehyk3yhve5mx"],[1,"4ou53jijx8rwcgbe6weym"],[0,"\" type=\""]],"start1":1310,"start2":1310,"length1":36,"length2":37},{"diffs":[[0,"e name=\""],[-1,"oo8c1g4iehyk3yhve5mx"],[1,"4ou53jijx8rwcgbe6weym"],[0,"\"><block"]],"start1":1505,"start2":1505,"length1":36,"length2":37},{"diffs":[[0,"AR\" id=\""],[-1,"];=E?/,gAyEy0Xf9N$M7"],[1,"xmha_W$pQB=lXAP[4:*e"],[0,"\">IIC_SC"]],"start1":2027,"start2":2027,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"P_~naMq#;Ba@]1qYa7oO"],[1,"#mZ`1,4c9!gHcB~/TxqA"],[0,"\">IIC_SD"]],"start1":2887,"start2":2887,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"P_~naMq#;Ba@]1qYa7oO"],[1,"#mZ`1,4c9!gHcB~/TxqA"],[0,"\">IIC_SD"]],"start1":3323,"start2":3323,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"];=E?/,gAyEy0Xf9N$M7"],[1,"xmha_W$pQB=lXAP[4:*e"],[0,"\">IIC_SC"]],"start1":4076,"start2":4076,"length1":36,"length2":36},{"diffs":[[0,"pe=\""],[-1,"device_button_even"],[1,"pxt-on-star"],[0,"t\" x=\""],[-1,"274"],[1,"0"],[0,"\" y=\""],[-1,"-262\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"montrer_grande_image\" functionid=\"Z@$Z_4hGS@MC$7;FWqR`\"><arg name=\"i"],[1,"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let column = 0\" numlines=\"1\" declaredvars=\"column\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let img : I"],[0,"mage"],[1,";"],[0,"\" "],[-1,"id=\"mr2suzh054kg8r3h7q14m\" type=\"Image\"></arg></mutation><value name=\"mr2suzh054kg8r3h7q14m\""],[1,"numlines=\"1\" declaredvars=\"img\"></mutation><next"],[0,"><bl"]],"start1":4628,"start2":4628,"length1":317,"length2":372},{"diffs":[[0,"type=\"variables_"],[-1,"g"],[1,"s"],[0,"et\"><field name="]],"start1":5004,"start2":5004,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"%Z[W(0?IPLX]5R5~OtPR\">img"],[1,"#mZ`1,4c9!gHcB~/TxqA\">IIC_SDA</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P20"],[0,"</fi"]],"start1":5043,"start2":5043,"length1":33,"length2":186},{"diffs":[[0,"k type=\""],[-1,"serial_writevalue\""],[1,"variables_set\"><field name=\"VAR\" id=\"xmha_W$pQB=lXAP[4:*e\">IIC_SCL</field"],[0,"><value "]],"start1":5260,"start2":5260,"length1":34,"length2":89},{"diffs":[[0,"ld><value name=\""],[-1,"name"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":5339,"start2":5339,"length1":36,"length2":37},{"diffs":[[0,"\"><shadow type=\""],[-1,"text"],[1,"math_number"],[0,"\"><field name=\"T"]],"start1":5360,"start2":5360,"length1":36,"length2":43},{"diffs":[[0,"me=\""],[-1,"TEXT\">width"],[1,"NUM\">0"],[0,"</fi"]],"start1":5398,"start2":5398,"length1":19,"length2":14},{"diffs":[[0,"ow><"],[-1,"/value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">img.width()</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">height</field></shadow></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">img.height()"],[1,"block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19</field></block></value><next><block type=\"function_call\"><mutation name=\"initPins\" functionid=\"}d-jMRX8@y$4I1cuqQ=0\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"rP(8:S1Pp,Bv$u(L6},C\">img</field><value name=\"VALUE\"><shadow type=\"math_number\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"NUM\">0</field></shadow><block type=\"device_build_big_image\"><field name=\"LEDS\">`\n        # . . . . . . . . . \n        # # # . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . .\n        `"],[0,"</fi"]],"start1":5422,"start2":5422,"length1":351,"length2":699},{"diffs":[[0,"/next></block></"],[1,"next></block></next></block></next></block></"],[0,"statement></bloc"]],"start1":6165,"start2":6165,"length1":32,"length2":77},{"diffs":[[0," x=\""],[-1,"658"],[1,"819"],[0,"\" y=\"-"],[-1,"262"],[1,"37"],[0,"\"><c"]],"start1":6272,"start2":6272,"length1":20,"length2":19},{"diffs":[[0,"AR\" id=\""],[-1,"(Q;F_%J6$j2a_D;?J}}O"],[1,"![iMZ,:lMdbF@u0ci!.4"],[0,"\">delayC"]],"start1":6428,"start2":6428,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"(Q;F_%J6$j2a_D;?J}}O"],[1,"![iMZ,:lMdbF@u0ci!.4"],[0,"\">delayC"]],"start1":6963,"start2":6963,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"(Q;F_%J6$j2a_D;?J}}O"],[1,"![iMZ,:lMdbF@u0ci!.4"],[0,"\">de"]],"start1":7199,"start2":7199,"length1":28,"length2":28},{"diffs":[[0,"AR\" id=\""],[-1,"4]6eG8oPFHtTj,|fvH]L"],[1,"B#@xF(bSd%]-VDPb1hp{"],[0,"\">dataLi"]],"start1":7382,"start2":7382,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"4]6eG8oPFHtTj,|fvH]L"],[1,"B#@xF(bSd%]-VDPb1hp{"],[0,"\">da"]],"start1":7881,"start2":7881,"length1":28,"length2":28},{"diffs":[[0," x=\""],[-1,"1971"],[1,"2132"],[0,"\" y=\"-"],[-1,"262"],[1,"37"],[0,"\"><m"]],"start1":8462,"start2":8462,"length1":21,"length2":20},{"diffs":[[0,"tionid=\""],[-1,"!+(Gcqh,h[]V#t3=R7.g"],[1,"=;oPne9L8,Rp,-CaK/%*"],[0,"\"></muta"]],"start1":8509,"start2":8509,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"];=E?/,gAyEy0Xf9N$M7"],[1,"xmha_W$pQB=lXAP[4:*e"],[0,"\">IIC_SC"]],"start1":8886,"start2":8886,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"P_~naMq#;Ba@]1qYa7oO"],[1,"#mZ`1,4c9!gHcB~/TxqA"],[0,"\">IIC_SD"]],"start1":9477,"start2":9477,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"];=E?/,gAyEy0Xf9N$M7"],[1,"xmha_W$pQB=lXAP[4:*e"],[0,"\">IIC_SC"]],"start1":10068,"start2":10068,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"P_~naMq#;Ba@]1qYa7oO"],[1,"#mZ`1,4c9!gHcB~/TxqA"],[0,"\">IIC_SD"]],"start1":10659,"start2":10659,"length1":36,"length2":36},{"diffs":[[0,"pe=\""],[-1,"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let column = 0\" numlines=\"1\" declaredvars=\"column\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let img : Image;\" numlines=\"1\" declaredvars=\"img\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P20</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19</field></block></value><next><block type=\"function_call\"><mutation name=\"initPins\" functionid=\"S9kkg,NVxMu9Z3PCV#}D\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"%Z[W(0?IPLX]5R5~OtPR\">img</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_build_big_image\"><field name=\"LEDS\">`\n        # . . . . . . . . . \n        # # # . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . .\n        `</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"-177\" y=\"485\"><mutation name=\"initPins\" functionid=\"S9kkg,NVxMu9Z3PCV#}D"],[1,"function_definition\" x=\"-16\" y=\"710\"><mutation name=\"initPins\" functionid=\"}d-jMRX8@y$4I1cuqQ=0"],[0,"\"></"]],"start1":11206,"start2":11206,"length1":1692,"length2":103},{"diffs":[[0,"AR\" id=\""],[-1,"];=E?/,gAyEy0Xf9N$M7"],[1,"xmha_W$pQB=lXAP[4:*e"],[0,"\">IIC_SC"]],"start1":11687,"start2":11687,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"P_~naMq#;Ba@]1qYa7oO"],[1,"#mZ`1,4c9!gHcB~/TxqA"],[0,"\">IIC_SD"]],"start1":12086,"start2":12086,"length1":36,"length2":36},{"diffs":[[0," x=\""],[-1,"324"],[1,"485"],[0,"\" y=\""],[-1,"485"],[1,"710"],[0,"\"><m"]],"start1":12375,"start2":12375,"length1":19,"length2":19},{"diffs":[[0,"tionid=\""],[-1,"1jp8CUo`Ala_]?Av52l0"],[1,"Kfe*=2A+uKzjRz[Artq7"],[0,"\"></muta"]],"start1":12423,"start2":12423,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"P_~naMq#;Ba@]1qYa7oO"],[1,"#mZ`1,4c9!gHcB~/TxqA"],[0,"\">IIC_SD"]],"start1":12802,"start2":12802,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"];=E?/,gAyEy0Xf9N$M7"],[1,"xmha_W$pQB=lXAP[4:*e"],[0,"\">IIC_SC"]],"start1":13201,"start2":13201,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"P_~naMq#;Ba@]1qYa7oO"],[1,"#mZ`1,4c9!gHcB~/TxqA"],[0,"\">II"]],"start1":13796,"start2":13796,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"];=E?/,gAyEy0Xf9N$M7"],[1,"xmha_W$pQB=lXAP[4:*e"],[0,"\">II"]],"start1":14387,"start2":14387,"length1":28,"length2":28},{"diffs":[[0," x=\""],[-1,"97"],[1,"102"],[0,"1\" y=\""],[-1,"583"],[1,"737"],[0,"\"><m"]],"start1":14939,"start2":14939,"length1":19,"length2":20},{"diffs":[[0,"id=\""],[-1,"Z@$Z_4hGS@MC$7;FWqR`"],[1,"R/S,`T/}Ee(D-]-S=hP%"],[0,"\"><a"]],"start1":15003,"start2":15003,"length1":28,"length2":28},{"diffs":[[0,"ge\" id=\""],[-1,"mr2suzh054kg8r3h7q14m"],[1,"10lbdnxatsn7114eu407n"],[0,"\" type=\""]],"start1":15043,"start2":15043,"length1":37,"length2":37},{"diffs":[[0,"me=\""],[-1,"mr2suzh054kg8r3h7q14m"],[1,"10lbdnxatsn7114eu407n"],[0,"\"><b"]],"start1":15260,"start2":15260,"length1":29,"length2":29},{"diffs":[[0,"id=\""],[-1,"79:[6=Of);hFn00R`(C#"],[1,"a}D-KxWuVi=[wV59f$^I"],[0,"\">x<"]],"start1":16826,"start2":16826,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"r$iWHmrW58TFC=?kT-VS"],[1,"N8KLOGT_}35wfxt8Ks78"],[0,"\">y<"]],"start1":17472,"start2":17472,"length1":28,"length2":28},{"diffs":[[0,"AR\" id=\""],[-1,"~d2a#F`uz(DWikU`u;=;"],[1,"N)TJN,mtYoBWkZ9-n~~X"],[0,"\">column"]],"start1":18253,"start2":18253,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"]ctIo5j1xByB,Trs|ib6"],[1,"%efkvs4mV0#C1wmYjBs="],[0,"\">rawBuf"]],"start1":18675,"start2":18675,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"~d2a#F`uz(DWikU`u;=;"],[1,"N)TJN,mtYoBWkZ9-n~~X"],[0,"\">co"]],"start1":18804,"start2":18804,"length1":28,"length2":28},{"diffs":[[0,"tionid=\""],[-1,"1jp8CUo`Ala_]?Av52l0"],[1,"Kfe*=2A+uKzjRz[Artq7"],[0,"\"></muta"]],"start1":18960,"start2":18960,"length1":36,"length2":36},{"diffs":[[0,"tionid=\""],[-1,"D!fc%(yRDof9$1Z5BO2O"],[1,"+Nfhq,+x}|CB*?fd0Wt+"],[0,"\"><arg n"]],"start1":19176,"start2":19176,"length1":36,"length2":36},{"diffs":[[0,"ta\" id=\""],[-1,"oo8c1g4iehyk3yhve5mx"],[1,"4ou53jijx8rwcgbe6weym"],[0,"\" type=\""]],"start1":19223,"start2":19223,"length1":36,"length2":37},{"diffs":[[0,"e name=\""],[-1,"oo8c1g4iehyk3yhve5mx"],[1,"4ou53jijx8rwcgbe6weym"],[0,"\"><shado"]],"start1":19290,"start2":19290,"length1":36,"length2":37},{"diffs":[[0,"tionid=\""],[-1,"!+(Gcqh,h[]V#t3=R7.g"],[1,"=;oPne9L8,Rp,-CaK/%*"],[0,"\"></muta"]],"start1":19456,"start2":19456,"length1":36,"length2":36},{"diffs":[[0,"tionid=\""],[-1,"1jp8CUo`Ala_]?Av52l0"],[1,"Kfe*=2A+uKzjRz[Artq7"],[0,"\"></muta"]],"start1":19562,"start2":19562,"length1":36,"length2":36},{"diffs":[[0,"tionid=\""],[-1,"D!fc%(yRDof9$1Z5BO2O"],[1,"+Nfhq,+x}|CB*?fd0Wt+"],[0,"\"><arg n"]],"start1":19774,"start2":19774,"length1":36,"length2":36},{"diffs":[[0,"ta\" id=\""],[-1,"oo8c1g4iehyk3yhve5mx"],[1,"4ou53jijx8rwcgbe6weym"],[0,"\" type=\""]],"start1":19821,"start2":19821,"length1":36,"length2":37},{"diffs":[[0,"e name=\""],[-1,"oo8c1g4iehyk3yhve5mx"],[1,"4ou53jijx8rwcgbe6weym"],[0,"\"><shado"]],"start1":19969,"start2":19969,"length1":36,"length2":37},{"diffs":[[0,"AR\" id=\""],[-1,"oyX[6inR1=5`hky$Y2eB"],[1,"0kmWBROx_0Ay..VT92nQ"],[0,"\">j</fie"]],"start1":20223,"start2":20223,"length1":36,"length2":36},{"diffs":[[0,"tionid=\""],[-1,"D!fc%(yRDof9$1Z5BO2O"],[1,"+Nfhq,+x}|CB*?fd0Wt+"],[0,"\"><arg n"]],"start1":20452,"start2":20452,"length1":36,"length2":36},{"diffs":[[0,"ta\" id=\""],[-1,"oo8c1g4iehyk3yhve5mx"],[1,"4ou53jijx8rwcgbe6weym"],[0,"\" type=\""]],"start1":20499,"start2":20499,"length1":36,"length2":37},{"diffs":[[0,"e name=\""],[-1,"oo8c1g4iehyk3yhve5mx"],[1,"4ou53jijx8rwcgbe6weym"],[0,"\"><shado"]],"start1":20566,"start2":20566,"length1":36,"length2":37},{"diffs":[[0,"id=\""],[-1,"]ctIo5j1xByB,Trs|ib6"],[1,"%efkvs4mV0#C1wmYjBs="],[0,"\">ra"]],"start1":20755,"start2":20755,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"oyX[6inR1=5`hky$Y2eB"],[1,"0kmWBROx_0Ay..VT92nQ"],[0,"\">j<"]],"start1":20943,"start2":20943,"length1":28,"length2":28},{"diffs":[[0,"tionid=\""],[-1,"!+(Gcqh,h[]V#t3=R7.g"],[1,"=;oPne9L8,Rp,-CaK/%*"],[0,"\"></muta"]],"start1":21093,"start2":21093,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"1jp8CUo`Ala_]?Av52l0"],[1,"Kfe*=2A+uKzjRz[Artq7"],[0,"\"></"]],"start1":21203,"start2":21203,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"D!fc%(yRDof9$1Z5BO2O"],[1,"+Nfhq,+x}|CB*?fd0Wt+"],[0,"\"><a"]],"start1":21405,"start2":21405,"length1":28,"length2":28},{"diffs":[[0,"ta\" id=\""],[-1,"oo8c1g4iehyk3yhve5mx"],[1,"4ou53jijx8rwcgbe6weym"],[0,"\" type=\""]],"start1":21448,"start2":21448,"length1":36,"length2":37},{"diffs":[[0,"me=\""],[-1,"oo8c1g4iehyk3yhve5mx"],[1,"4ou53jijx8rwcgbe6weym"],[0,"\"><s"]],"start1":21592,"start2":21592,"length1":28,"length2":29},{"diffs":[[0,"id=\""],[-1,"!+(Gcqh,h[]V#t3=R7.g"],[1,"=;oPne9L8,Rp,-CaK/%*"],[0,"\"></"]],"start1":21759,"start2":21759,"length1":28,"length2":28}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"mg)\n"],[-1,"    serial.writeValue(\"width\", img.width())\n    serial.writeValue(\"height\", img.height())\n"],[0,"})\n/"]],"start1":1541,"start2":1541,"length1":98,"length2":8}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":251,"start2":251,"length1":17,"length2":21}]}]},{"timestamp":1734892706727,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ment"],[-1," id=\"N;5%M:P6U,Z+3{=E@RdH\""],[0," x=\""]],"start1":657,"start2":657,"length1":34,"length2":8},{"diffs":[[0,"on\" "],[-1,"id=\"w-_rpUgUfj0)A(I8:j{M\" x=\"0"],[1,"x=\"1596"],[0,"\" y=\""],[-1,"0"],[1,"-463"],[0,"\"><m"]],"start1":763,"start2":763,"length1":44,"length2":24},{"diffs":[[0,"x\"><"],[-1,"shadow type=\"argument_reporter_number\" id=\"UTOkW$=;WtLvfS1o?t3(\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field></shadow><block type=\"argument_reporter_number\" id=\"CPsAY-vU)x`R9[$qZ_#j\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field></block></value><statement name=\"STACK\"><block type=\"controls_repeat_ext\" id=\"@#?1v8aqC7_l2m1%$XQG\"><value name=\"TIMES\"><shadow type=\"math_whole_number\" id=\"56*`#=Wa,F[*IRx?sey;"],[1,"block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field></block></value><statement name=\"STACK\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">sendData &amp; 0x01</field></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"sendData &gt;&gt;= 1;\" numlines=\"1\"></mutation><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_button_event\" x=\"274\" y=\"-262\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"montrer_grande_image\" functionid=\"Z@$Z_4hGS@MC$7;FWqR`\"><arg name=\"image\" id=\"mr2suzh054kg8r3h7q14m\" type=\"Image\"></arg></mutation><value name=\"mr2suzh054kg8r3h7q14m\"><block type=\"variables_get\"><field name=\"VAR\" id=\"%Z[W(0?IPLX]5R5~OtPR\">img</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">width</field></shadow></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">img.width()</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">height</field></shadow></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">img.height()</field></block></value></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"658\" y=\"-262\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\"><block type=\"variables_change\"><field name=\"VAR\" id=\"(Q;F_%J6$j2a_D;?J}}O\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Mise à jour de la ligne ***************</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(Q;F_%J6$j2a_D;?J}}O\">delayCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"(Q;F_%J6$j2a_D;?J}}O\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"4]6eG8oPFHtTj,|fvH]L\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4]6eG8oPFHtTj,|fvH]L\">dataLine</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Petite pause</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1971\" y=\"-262\"><mutation name=\"IIC_end\" functionid=\"!+(Gcqh,h[]V#t3=R7.g\"></mutation><field name=\"function_name\">IIC_end</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Terminer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let column = 0\" numlines=\"1\" declaredvars=\"column\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let img : Image;\" numlines=\"1\" declaredvars=\"img\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P20</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19</field></block></value><next><block type=\"function_call\"><mutation name=\"initPins\" functionid=\"S9kkg,NVxMu9Z3PCV#}D\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"%Z[W(0?IPLX]5R5~OtPR\">img</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_build_big_image\"><field name=\"LEDS\">`\n        # . . . . . . . . . \n        # # # . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . .\n        `</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"-177\" y=\"485\"><mutation name=\"initPins\" functionid=\"S9kkg,NVxMu9Z3PCV#}D\"></mutation><field name=\"function_name\">initPins</field><comment pinned=\"false\" h=\"80\" w=\"160\">Compteur pour changer la ligne\nFonction : Initialiser l'état des broches</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></next></block></statement></block><block type=\"function_definition\" x=\"324\" y=\"485\"><mutation name=\"IIC_start\" functionid=\"1jp8CUo`Ala_]?Av52l0\"></mutation><field name=\"function_name\">IIC_start</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Démarrer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"971\" y=\"583\"><mutation name=\"montrer_grande_image\" functionid=\"Z@$Z_4hGS@MC$7;FWqR`\"><arg name=\"image\" id=\"mr2suzh054kg8r3h7q14m\" type=\"Image\"></arg></mutation><field name=\"function_name\">montrer_grande_image</field><comment pinned=\"false\" h=\"80\" w=\"160\">we create the buffer to send</comment><data>0</data><value name=\"mr2suzh054kg8r3h7q14m\"><block type=\"argument_reporter_custom\"><mutation duplicateondrag=\"true\" typename=\"Image\"></mutation><field name=\"VALUE\">image</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.width()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">16</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"true\"></mutation></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.height()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"true\"></mutation></block></statement><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"79:[6=Of);hFn00R`(C#\">x</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.width()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"r$iWHmrW58TFC=?kT-VS\">y</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.height()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.pixel(x, y)</field></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"~d2a#F`uz(DWikU`u;=;\">column</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"column &lt;&lt;= 1;\" numlines=\"1\"></mutation></block></next></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]ctIo5j1xByB,Trs|ib6\">rawBuffer</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"~d2a#F`uz(DWikU`u;=;\">column</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"1jp8CUo`Ala_]?Av52l0\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">************ Activer l'incrémentation automatique ************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"D!fc%(yRDof9$1Z5BO2O\"><arg name=\"sendData\" id=\"oo8c1g4iehyk3yhve5mx\" type=\"number\"></arg></mutation><value name=\"oo8c1g4iehyk3yhve5mx\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"!+(Gcqh,h[]V#t3=R7.g\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"1jp8CUo`Ala_]?Av52l0\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">********** Envoyer les données d'affichage ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"D!fc%(yRDof9$1Z5BO2O\"><arg name=\"sendData\" id=\"oo8c1g4iehyk3yhve5mx\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse mémoire de départ (0x00)</comment><value name=\"oo8c1g4iehyk3yhve5mx\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"oyX[6inR1=5`hky$Y2eB\">j</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">15</field></shadow></value><statement name=\"DO\"><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"D!fc%(yRDof9$1Z5BO2O\"><arg name=\"sendData\" id=\"oo8c1g4iehyk3yhve5mx\" type=\"number\"></arg></mutation><value name=\"oo8c1g4iehyk3yhve5mx\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]ctIo5j1xByB,Trs|ib6\">rawBuffer</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oyX[6inR1=5`hky$Y2eB\">j</field></block></value></block></value></block></statement><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"!+(Gcqh,h[]V#t3=R7.g\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"1jp8CUo`Ala_]?Av52l0\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Régler la luminosité ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"D!fc%(yRDof9$1Z5BO2O\"><arg name=\"sendData\" id=\"oo8c1g4iehyk3yhve5mx\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité</comment><value name=\"oo8c1g4iehyk3yhve5mx\"><shadow type=\"math_number"],[0,"\"><f"]],"start1":1083,"start2":1083,"length1":484,"length2":21038},{"diffs":[[0,"ield name=\"NUM\">"],[1,"13"],[0,"8</field></shado"]],"start1":22121,"start2":22121,"length1":32,"length2":34},{"diffs":[[0,"shadow></value><"],[1,"next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"!+(Gcqh,h[]V#t3=R7.g\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next><"],[0,"/block></stateme"]],"start1":22150,"start2":22150,"length1":32,"length2":316}]}]},{"timestamp":1734893619170,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," ],\n"],[-1,"    \"testFiles\": [\n        \"test.ts\"\n    ],\n"],[0,"    "]],"start1":231,"start2":231,"length1":52,"length2":8}]},{"type":"added","filename":"test.ts","value":"// les tests vont ici ; cela ne sera pas compilé si ce paquet est utilisé en tant qu'extension.\n"}]}],"snapshots":[{"timestamp":1734886213182,"editorVersion":"7.0.51","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"leds 16x8 v2\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1734889126914,"editorVersion":"7.0.51","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</variable><variable id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</variable><variable id=\"ruvFMZxQ[c_/p%6zgEDn\">j</variable><variable id=\":y~bDA~XRumHh2F$GQ4p\">table</variable><variable id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</variable><variable id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</variable></variables><comment x=\"20\" y=\"3249\" w=\"260\" h=\"120\">\nLigne actuelle des données\n</comment><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field><comment pinned=\"false\" h=\"80\" w=\"160\">Définit les broches pour SDA et SCL</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P20</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\":y~bDA~XRumHh2F$GQ4p\">table</field><comment pinned=\"false\" h=\"80\" w=\"160\">Tableau de données à afficher</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"4\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD1\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD2\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD3\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"15\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">248</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">216</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">126</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><next><block type=\"function_call\"><mutation name=\"initPins\" functionid=\"LfI{V~B;ZZR.6Sy#6|a@\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"500\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">************ Activer l'incrémentation automatique ************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Envoi de l'adresse I²C (0x38) avec bit d'écriture (R/W=0)</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Activer l'incrémentation automatique</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">********** Envoyer les données d'affichage ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse I²C avec bit d'écriture</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse mémoire de départ (0x00)</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><next><block type=\"pxt_controls_for\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"ruvFMZxQ[c_/p%6zgEDn\">j</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">15</field></block></value><statement name=\"DO\"><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Envoi des données ligne par ligne</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\":y~bDA~XRumHh2F$GQ4p\">table</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ruvFMZxQ[c_/p%6zgEDn\">j</field></block></value></block></value></block></statement><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Régler la luminosité ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse I²C avec bit d'écriture</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">138</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data><next><block type=\"variables_change\"><field name=\"VAR\" id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Mise à jour de la ligne ***************</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Petite pause</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1429\" y=\"20\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><field name=\"function_name\">IIC_send</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Envoyer un octet via I²C</comment><value name=\"2b4lmc19alf1uu06jx2i\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field></block></value><statement name=\"STACK\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">sendData &amp; 0x01</field></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"sendData &gt;&gt;= 1;\" numlines=\"1\"></mutation><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type=\"device_set_digital_pin\"><comment pinned=\"false\" h=\"80\" w=\"160\">Attendre l'acknowledge</comment><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2006\" y=\"20\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><field name=\"function_name\">IIC_start</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Démarrer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2507\" y=\"20\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><field name=\"function_name\">IIC_end</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Terminer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3008\" y=\"20\"><mutation name=\"initPins\" functionid=\"LfI{V~B;ZZR.6Sy#6|a@\"></mutation><field name=\"function_name\">initPins</field><comment pinned=\"false\" h=\"80\" w=\"160\">Compteur pour changer la ligne\nFonction : Initialiser l'état des broches</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></next></block></statement></block></xml>","main.ts":"// Définit les broches pour SDA et SCL\nconst IIC_SCL = DigitalPin.P19; // Remplacez par la broche SCL utilisée\nconst IIC_SDA = DigitalPin.P20; // Remplacez par la broche SDA utilisée\n\n// Tableau de données à afficher\nconst table: number[][] = [\n    [0x00, 0x00, 0x00, 0x00, 0x26, 0x41, 0x86, 0x80, 0x80, 0x80, 0x86, 0x41, 0x26, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x22, 0x42, 0x84, 0x42, 0x22, 0x1C, 0x00, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0x20, 0x44, 0x42, 0x84, 0x80, 0x84, 0x42, 0x44, 0x20, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0xC0, 0x40, 0xF8, 0xD8, 0x7E, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00]\n];\n\nlet dataLine = 0; // Ligne actuelle des données\nlet delayCount = 0; // Compteur pour changer la ligne\n\n// Fonction : Initialiser l'état des broches\nfunction initPins(): void {\n    pins.digitalWritePin(IIC_SCL, 1);\n    pins.digitalWritePin(IIC_SDA, 1);\n}\n\n// Fonction : Démarrer la communication I²C\nfunction IIC_start(): void {\n    pins.digitalWritePin(IIC_SDA, 1);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 0);\n    control.waitMicros(3);\n}\n\n// Fonction : Envoyer un octet via I²C\nfunction IIC_send(sendData: number): void {\n    for (let i = 0; i < 8; i++) {\n        pins.digitalWritePin(IIC_SCL, 0);\n        control.waitMicros(3);\n        if (sendData & 0x01) {\n            pins.digitalWritePin(IIC_SDA, 1);\n        } else {\n            pins.digitalWritePin(IIC_SDA, 0);\n        }\n        sendData >>= 1;\n        control.waitMicros(3);\n        pins.digitalWritePin(IIC_SCL, 1);\n        control.waitMicros(3);\n    }\n    // Attendre l'acknowledge\n    pins.digitalWritePin(IIC_SCL, 0);\n    pins.digitalWritePin(IIC_SDA, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 0);\n}\n\n// Fonction : Terminer la communication I²C\nfunction IIC_end(): void {\n    pins.digitalWritePin(IIC_SCL, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 1);\n    control.waitMicros(3);\n}\n\n// Programme principal\nbasic.forever(() => {\n    /************** Activer l'incrémentation automatique **************/\n    IIC_start();\n    //IIC_send(0x38 << 1 | 0x00); // Envoi de l'adresse I²C (0x38) avec bit d'écriture (R/W=0)\n    IIC_send(0x40);             // Activer l'incrémentation automatique\n    IIC_end();\n\n    /************ Envoyer les données d'affichage *****************/\n    IIC_start();\n    //IIC_send(0x38 << 1 | 0x00); // Adresse I²C avec bit d'écriture\n    IIC_send(0xC0);             // Adresse mémoire de départ (0x00)\n    for (let i = 0; i < 16; i++) {\n        IIC_send(i); //table[dataLine][i]// Envoi des données ligne par ligne\n    }\n    IIC_end();\n\n    /************* Régler la luminosité *****************/\n    IIC_start();\n    //IIC_send(0x38 << 1 | 0x00); // Adresse I²C avec bit d'écriture\n    IIC_send(0x8A);             // Réglage de la luminosité\n    IIC_end();\n\n    /************* Mise à jour de la ligne *****************/\n    delayCount++;\n    if (delayCount >= 10) {\n        delayCount = 0;\n        dataLine = (dataLine + 1) % 4; // Passer à la ligne suivante\n    }\n\n    basic.pause(100); // Petite pause\n});\n\n// Initialiser les broches au démarrage\ninitPins();","README.md":"","pxt.json":"{\n    \"name\": \"leds 16x8 v2\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1734891257234,"editorVersion":"7.0.51","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</variable><variable id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</variable><variable id=\"ruvFMZxQ[c_/p%6zgEDn\">j</variable><variable id=\":y~bDA~XRumHh2F$GQ4p\">table</variable><variable id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</variable><variable id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</variable></variables><comment x=\"20\" y=\"3249\" w=\"260\" h=\"120\">\nLigne actuelle des données\n</comment><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field><comment pinned=\"false\" h=\"80\" w=\"160\">Définit les broches pour SDA et SCL</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P20</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\":y~bDA~XRumHh2F$GQ4p\">table</field><comment pinned=\"false\" h=\"80\" w=\"160\">Tableau de données à afficher</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"4\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">134</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">38</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD1\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">34</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">28</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD2\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"16\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">132</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">68</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">32</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD15\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"ADD3\"><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"15\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD4\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD5\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><value name=\"ADD6\"><shadow type=\"math_number\"><field name=\"NUM\">248</field></shadow></value><value name=\"ADD7\"><shadow type=\"math_number\"><field name=\"NUM\">216</field></shadow></value><value name=\"ADD8\"><shadow type=\"math_number\"><field name=\"NUM\">126</field></shadow></value><value name=\"ADD9\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><value name=\"ADD10\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><value name=\"ADD11\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD12\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD13\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD14\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><next><block type=\"function_call\"><mutation name=\"initPins\" functionid=\"LfI{V~B;ZZR.6Sy#6|a@\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"500\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">************ Activer l'incrémentation automatique ************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Envoi de l'adresse I²C (0x38) avec bit d'écriture (R/W=0)</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Activer l'incrémentation automatique</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">********** Envoyer les données d'affichage ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse I²C avec bit d'écriture</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse mémoire de départ (0x00)</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><next><block type=\"pxt_controls_for\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"ruvFMZxQ[c_/p%6zgEDn\">j</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">15</field></block></value><statement name=\"DO\"><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Envoi des données ligne par ligne</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\":y~bDA~XRumHh2F$GQ4p\">table</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ruvFMZxQ[c_/p%6zgEDn\">j</field></block></value></block></value></block></statement><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Régler la luminosité ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse I²C avec bit d'écriture</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">0x38 &lt;&lt; 1 | 0x00</field></block></value><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité</comment><value name=\"2b4lmc19alf1uu06jx2i\"><shadow type=\"math_number\"><field name=\"NUM\">138</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data><next><block type=\"variables_change\"><field name=\"VAR\" id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Mise à jour de la ligne ***************</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"wD2@IfWf!f7D(S^*UZNn\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"aQ+RYMKFi!Xo;=-+.`M^\">dataLine</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Petite pause</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1429\" y=\"20\"><mutation name=\"IIC_send\" functionid=\"y4qquJAUgmATVFUcS3_M\"><arg name=\"sendData\" id=\"2b4lmc19alf1uu06jx2i\" type=\"number\"></arg></mutation><field name=\"function_name\">IIC_send</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Envoyer un octet via I²C</comment><value name=\"2b4lmc19alf1uu06jx2i\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field></block></value><statement name=\"STACK\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">sendData &amp; 0x01</field></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"sendData &gt;&gt;= 1;\" numlines=\"1\"></mutation><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type=\"device_set_digital_pin\"><comment pinned=\"false\" h=\"80\" w=\"160\">Attendre l'acknowledge</comment><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2006\" y=\"20\"><mutation name=\"IIC_start\" functionid=\"Br9x~.vgqL*[PI|n`X5J\"></mutation><field name=\"function_name\">IIC_start</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Démarrer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2507\" y=\"20\"><mutation name=\"IIC_end\" functionid=\"T][}to^pVg#ms8~xW_bZ\"></mutation><field name=\"function_name\">IIC_end</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Terminer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3008\" y=\"20\"><mutation name=\"initPins\" functionid=\"LfI{V~B;ZZR.6Sy#6|a@\"></mutation><field name=\"function_name\">initPins</field><comment pinned=\"false\" h=\"80\" w=\"160\">Compteur pour changer la ligne\nFonction : Initialiser l'état des broches</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VRa~?v^(3;sw+3$^N%yi\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K-p?FQ-6R.C;q[UXkZlp\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></next></block></statement></block></xml>","main.ts":"// Définit les broches pour SDA et SCL\nconst IIC_SCL = DigitalPin.P19; // Remplacez par la broche SCL utilisée\nconst IIC_SDA = DigitalPin.P20; // Remplacez par la broche SDA utilisée\n\n// Tableau de données à afficher\nconst table: number[][] = [\n    [0x00, 0x00, 0x00, 0x00, 0x26, 0x41, 0x86, 0x80, 0x80, 0x80, 0x86, 0x41, 0x26, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x22, 0x42, 0x84, 0x42, 0x22, 0x1C, 0x00, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0x20, 0x44, 0x42, 0x84, 0x80, 0x84, 0x42, 0x44, 0x20, 0x00, 0x00, 0x00],\n    [0x00, 0x00, 0x00, 0x00, 0xC0, 0x40, 0xF8, 0xD8, 0x7E, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00]\n];\n\nlet dataLine = 0; // Ligne actuelle des données\nlet delayCount = 0; // Compteur pour changer la ligne\n\n// Fonction : Initialiser l'état des broches\nfunction initPins(): void {\n    pins.digitalWritePin(IIC_SCL, 1);\n    pins.digitalWritePin(IIC_SDA, 1);\n}\n\n// Fonction : Démarrer la communication I²C\nfunction IIC_start(): void {\n    pins.digitalWritePin(IIC_SDA, 1);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 0);\n    control.waitMicros(3);\n}\n\n// Fonction : Envoyer un octet via I²C\nfunction IIC_send(sendData: number): void {\n    for (let i = 0; i < 8; i++) {\n        pins.digitalWritePin(IIC_SCL, 0);\n        control.waitMicros(3);\n        if (sendData & 0x01) {\n            pins.digitalWritePin(IIC_SDA, 1);\n        } else {\n            pins.digitalWritePin(IIC_SDA, 0);\n        }\n        sendData >>= 1;\n        control.waitMicros(3);\n        pins.digitalWritePin(IIC_SCL, 1);\n        control.waitMicros(3);\n    }\n    // Attendre l'acknowledge\n    pins.digitalWritePin(IIC_SCL, 0);\n    pins.digitalWritePin(IIC_SDA, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 0);\n}\n\n// Fonction : Terminer la communication I²C\nfunction IIC_end(): void {\n    pins.digitalWritePin(IIC_SCL, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 0);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SCL, 1);\n    control.waitMicros(3);\n    pins.digitalWritePin(IIC_SDA, 1);\n    control.waitMicros(3);\n}\n\n// Programme principal\nbasic.forever(() => {\n    /************** Activer l'incrémentation automatique **************/\n    IIC_start();\n    IIC_send(0x40);             // Activer l'incrémentation automatique\n    IIC_end();\n\n    /************ Envoyer les données d'affichage *****************/\n    IIC_start();\n    IIC_send(0xC0);             // Adresse mémoire de départ (0x00)\n    //for (let i = 0; i < 16; i++) {\n    //    IIC_send(i); //table[dataLine][i]// Envoi des données ligne par ligne\n    //}\n    IIC_send(1);\n    for (let i = 0; i < 15; i++) {\n       IIC_send(0); //table[dataLine][i]// Envoi des données ligne par ligne\n    }\n    IIC_end();\n\n    /************* Régler la luminosité *****************/\n    //IIC_start();\n    //IIC_send(0x8A);             // Réglage de la luminosité\n    //IIC_end();\n\n    /************* Mise à jour de la ligne *****************/\n    delayCount++;\n    if (delayCount >= 10) {\n        delayCount = 0;\n        dataLine = (dataLine + 1) % 4; // Passer à la ligne suivante\n    }\n\n    basic.pause(100); // Petite pause\n});\n\n// Initialiser les broches au démarrage\ninitPins();","README.md":"","pxt.json":"{\n    \"name\": \"leds 16x8 v2\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1734893619170,"editorVersion":"7.0.51","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"79:[6=Of);hFn00R`(C#\">x</variable><variable id=\"r$iWHmrW58TFC=?kT-VS\">y</variable><variable id=\"~d2a#F`uz(DWikU`u;=;\">column</variable><variable id=\"]ctIo5j1xByB,Trs|ib6\">rawBuffer</variable><variable id=\"oyX[6inR1=5`hky$Y2eB\">j</variable><variable id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</variable><variable id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</variable><variable id=\"*aofJFzA-r~{-_%j~*t~\">image</variable><variable id=\"%Z[W(0?IPLX]5R5~OtPR\">img</variable><variable id=\"(Q;F_%J6$j2a_D;?J}}O\">delayCount</variable><variable id=\"4]6eG8oPFHtTj,|fvH]L\">dataLine</variable></variables><comment x=\"1466\" y=\"485\" w=\"260\" h=\"120\">\nLigne actuelle des données\n</comment><block type=\"function_definition\" x=\"1596\" y=\"-463\"><mutation name=\"IIC_send\" functionid=\"D!fc%(yRDof9$1Z5BO2O\"><arg name=\"sendData\" id=\"oo8c1g4iehyk3yhve5mx\" type=\"number\"></arg></mutation><field name=\"function_name\">IIC_send</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Envoyer un octet via I²C</comment><value name=\"oo8c1g4iehyk3yhve5mx\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">sendData</field></block></value><statement name=\"STACK\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">sendData &amp; 0x01</field></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"sendData &gt;&gt;= 1;\" numlines=\"1\"></mutation><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_button_event\" x=\"274\" y=\"-262\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"montrer_grande_image\" functionid=\"Z@$Z_4hGS@MC$7;FWqR`\"><arg name=\"image\" id=\"mr2suzh054kg8r3h7q14m\" type=\"Image\"></arg></mutation><value name=\"mr2suzh054kg8r3h7q14m\"><block type=\"variables_get\"><field name=\"VAR\" id=\"%Z[W(0?IPLX]5R5~OtPR\">img</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">width</field></shadow></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">img.width()</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">height</field></shadow></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">img.height()</field></block></value></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"658\" y=\"-262\"><comment pinned=\"false\" h=\"80\" w=\"160\">Programme principal</comment><statement name=\"HANDLER\"><block type=\"variables_change\"><field name=\"VAR\" id=\"(Q;F_%J6$j2a_D;?J}}O\">delayCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Mise à jour de la ligne ***************</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(Q;F_%J6$j2a_D;?J}}O\">delayCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"(Q;F_%J6$j2a_D;?J}}O\">delayCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"4]6eG8oPFHtTj,|fvH]L\">dataLine</field><comment pinned=\"false\" h=\"80\" w=\"160\">Passer à la ligne suivante</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4]6eG8oPFHtTj,|fvH]L\">dataLine</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Petite pause</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1971\" y=\"-262\"><mutation name=\"IIC_end\" functionid=\"!+(Gcqh,h[]V#t3=R7.g\"></mutation><field name=\"function_name\">IIC_end</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Terminer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let column = 0\" numlines=\"1\" declaredvars=\"column\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let img : Image;\" numlines=\"1\" declaredvars=\"img\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P20</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P19</field></block></value><next><block type=\"function_call\"><mutation name=\"initPins\" functionid=\"S9kkg,NVxMu9Z3PCV#}D\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Initialiser les broches au démarrage</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"%Z[W(0?IPLX]5R5~OtPR\">img</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_build_big_image\"><field name=\"LEDS\">`\n        # . . . . . . . . . \n        # # # . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . . \n        # . . . . . . . . .\n        `</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"-177\" y=\"485\"><mutation name=\"initPins\" functionid=\"S9kkg,NVxMu9Z3PCV#}D\"></mutation><field name=\"function_name\">initPins</field><comment pinned=\"false\" h=\"80\" w=\"160\">Compteur pour changer la ligne\nFonction : Initialiser l'état des broches</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></next></block></statement></block><block type=\"function_definition\" x=\"324\" y=\"485\"><mutation name=\"IIC_start\" functionid=\"1jp8CUo`Ala_]?Av52l0\"></mutation><field name=\"function_name\">IIC_start</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fonction : Démarrer la communication I²C</comment><statement name=\"STACK\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"P_~naMq#;Ba@]1qYa7oO\">IIC_SDA</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value><next><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"];=E?/,gAyEy0Xf9N$M7\">IIC_SCL</field></block></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"control_wait_us\"><value name=\"micros\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"6000\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"971\" y=\"583\"><mutation name=\"montrer_grande_image\" functionid=\"Z@$Z_4hGS@MC$7;FWqR`\"><arg name=\"image\" id=\"mr2suzh054kg8r3h7q14m\" type=\"Image\"></arg></mutation><field name=\"function_name\">montrer_grande_image</field><comment pinned=\"false\" h=\"80\" w=\"160\">we create the buffer to send</comment><data>0</data><value name=\"mr2suzh054kg8r3h7q14m\"><block type=\"argument_reporter_custom\"><mutation duplicateondrag=\"true\" typename=\"Image\"></mutation><field name=\"VALUE\">image</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.width()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">16</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"true\"></mutation></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.height()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"true\"></mutation></block></statement><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"79:[6=Of);hFn00R`(C#\">x</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.width()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"r$iWHmrW58TFC=?kT-VS\">y</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.height()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">image.pixel(x, y)</field></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"~d2a#F`uz(DWikU`u;=;\">column</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"column &lt;&lt;= 1;\" numlines=\"1\"></mutation></block></next></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]ctIo5j1xByB,Trs|ib6\">rawBuffer</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"~d2a#F`uz(DWikU`u;=;\">column</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"1jp8CUo`Ala_]?Av52l0\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">************ Activer l'incrémentation automatique ************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"D!fc%(yRDof9$1Z5BO2O\"><arg name=\"sendData\" id=\"oo8c1g4iehyk3yhve5mx\" type=\"number\"></arg></mutation><value name=\"oo8c1g4iehyk3yhve5mx\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"!+(Gcqh,h[]V#t3=R7.g\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"1jp8CUo`Ala_]?Av52l0\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">********** Envoyer les données d'affichage ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"D!fc%(yRDof9$1Z5BO2O\"><arg name=\"sendData\" id=\"oo8c1g4iehyk3yhve5mx\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Adresse mémoire de départ (0x00)</comment><value name=\"oo8c1g4iehyk3yhve5mx\"><shadow type=\"math_number\"><field name=\"NUM\">192</field></shadow></value><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"oyX[6inR1=5`hky$Y2eB\">j</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">15</field></shadow></value><statement name=\"DO\"><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"D!fc%(yRDof9$1Z5BO2O\"><arg name=\"sendData\" id=\"oo8c1g4iehyk3yhve5mx\" type=\"number\"></arg></mutation><value name=\"oo8c1g4iehyk3yhve5mx\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]ctIo5j1xByB,Trs|ib6\">rawBuffer</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oyX[6inR1=5`hky$Y2eB\">j</field></block></value></block></value></block></statement><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"!+(Gcqh,h[]V#t3=R7.g\"></mutation><next><block type=\"function_call\"><mutation name=\"IIC_start\" functionid=\"1jp8CUo`Ala_]?Av52l0\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">*********** Régler la luminosité ***************</comment><next><block type=\"function_call\"><mutation name=\"IIC_send\" functionid=\"D!fc%(yRDof9$1Z5BO2O\"><arg name=\"sendData\" id=\"oo8c1g4iehyk3yhve5mx\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Réglage de la luminosité</comment><value name=\"oo8c1g4iehyk3yhve5mx\"><shadow type=\"math_number\"><field name=\"NUM\">138</field></shadow></value><next><block type=\"function_call\"><mutation name=\"IIC_end\" functionid=\"!+(Gcqh,h[]V#t3=R7.g\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"/**\n * Ligne actuelle des données\n */\n// we create the buffer to send\nfunction montrer_grande_image (image: Image) {\n    let rawBuffer: number[] = []\n    if (image.width() != 16) {\n        return\n    }\n    if (image.height() != 8) {\n        return\n    }\n    for (let x = 0; x <= image.width() - 1; x++) {\n        for (let y = 0; y <= image.height() - 1; y++) {\n            if (image.pixel(x, y)) {\n                column += 1\n            }\n            column <<= 1;\n        }\n        rawBuffer.push(column)\n    }\n    // ************ Activer l'incrémentation automatique ************\n    IIC_start()\n    IIC_send(64)\n    IIC_end()\n    // ********** Envoyer les données d'affichage ***************\n    IIC_start()\n    // Adresse mémoire de départ (0x00)\n    IIC_send(192)\n    for (let j = 0; j <= 15; j++) {\n        IIC_send(rawBuffer[j])\n    }\n    IIC_end()\n    // *********** Régler la luminosité ***************\n    IIC_start()\n    // Réglage de la luminosité\n    IIC_send(138)\n    IIC_end()\n}\n// Fonction : Démarrer la communication I²C\nfunction IIC_start () {\n    pins.digitalWritePin(IIC_SDA, 1)\n    pins.digitalWritePin(IIC_SCL, 1)\n    control.waitMicros(3)\n    pins.digitalWritePin(IIC_SDA, 0)\n    control.waitMicros(3)\n    pins.digitalWritePin(IIC_SCL, 0)\n    control.waitMicros(3)\n}\n// Compteur pour changer la ligne\n// Fonction : Initialiser l'état des broches\nfunction initPins () {\n    pins.digitalWritePin(IIC_SCL, 1)\n    pins.digitalWritePin(IIC_SDA, 1)\n}\ninput.onButtonPressed(Button.A, function () {\n    montrer_grande_image(img)\n    serial.writeValue(\"width\", img.width())\n    serial.writeValue(\"height\", img.height())\n})\n// Fonction : Terminer la communication I²C\nfunction IIC_end () {\n    pins.digitalWritePin(IIC_SCL, 0)\n    control.waitMicros(3)\n    pins.digitalWritePin(IIC_SDA, 0)\n    control.waitMicros(3)\n    pins.digitalWritePin(IIC_SCL, 1)\n    control.waitMicros(3)\n    pins.digitalWritePin(IIC_SDA, 1)\n    control.waitMicros(3)\n}\n// Fonction : Envoyer un octet via I²C\nfunction IIC_send (sendData: number) {\n    for (let index = 0; index < 8; index++) {\n        pins.digitalWritePin(IIC_SCL, 0)\n        control.waitMicros(3)\n        if (sendData & 0x01) {\n            pins.digitalWritePin(IIC_SDA, 1)\n        } else {\n            pins.digitalWritePin(IIC_SDA, 0)\n        }\n        sendData >>= 1;\ncontrol.waitMicros(3)\n        pins.digitalWritePin(IIC_SCL, 1)\n        control.waitMicros(3)\n    }\n}\nlet dataLine = 0\nlet delayCount = 0\nlet IIC_SCL = 0\nlet IIC_SDA = 0\nlet column = 0\nlet img : Image;\nIIC_SDA = DigitalPin.P20\nIIC_SCL = DigitalPin.P19\n// Initialiser les broches au démarrage\ninitPins()\nimg = images.createBigImage(`\n    # . . . . . . . . .\n    # # # . . . . . . .\n    # . . . . . . . . .\n    # . . . . . . . . .\n    # . . . . . . . . .\n    `)\n// Programme principal\nbasic.forever(function () {\n    // *********** Mise à jour de la ligne ***************\n    delayCount += 1\n    if (delayCount >= 10) {\n        delayCount = 0\n        // Passer à la ligne suivante\n        dataLine = (dataLine + 1) % 4\n    }\n    // Petite pause\n    basic.pause(100)\n})\n","README.md":"","pxt.json":"{\n    \"name\": \"leds 16x8 v2\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1734893619486}